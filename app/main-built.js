(function () {/**
 * almond 0.2.0 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
//Going sloppy to avoid 'use strict' string cost, but strict practices should
//be followed.
/*jslint sloppy: true */
/*global setTimeout: false */

var requirejs, require, define;
(function (undef) {
    var main, req, makeMap, handlers,
        defined = {},
        waiting = {},
        config = {},
        defining = {},
        aps = [].slice;

    /**
     * Given a relative module name, like ./something, normalize it to
     * a real name that can be mapped to a path.
     * @param {String} name the relative name
     * @param {String} baseName a real name that the name arg is relative
     * to.
     * @returns {String} normalized name
     */
    function normalize(name, baseName) {
        var nameParts, nameSegment, mapValue, foundMap,
            foundI, foundStarMap, starI, i, j, part,
            baseParts = baseName && baseName.split("/"),
            map = config.map,
            starMap = (map && map['*']) || {};

        //Adjust any relative paths.
        if (name && name.charAt(0) === ".") {
            //If have a base name, try to normalize against it,
            //otherwise, assume it is a top-level require that will
            //be relative to baseUrl in the end.
            if (baseName) {
                //Convert baseName to array, and lop off the last part,
                //so that . matches that "directory" and not name of the baseName's
                //module. For instance, baseName of "one/two/three", maps to
                //"one/two/three.js", but we want the directory, "one/two" for
                //this normalization.
                baseParts = baseParts.slice(0, baseParts.length - 1);

                name = baseParts.concat(name.split("/"));

                //start trimDots
                for (i = 0; i < name.length; i += 1) {
                    part = name[i];
                    if (part === ".") {
                        name.splice(i, 1);
                        i -= 1;
                    } else if (part === "..") {
                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {
                            //End of the line. Keep at least one non-dot
                            //path segment at the front so it can be mapped
                            //correctly to disk. Otherwise, there is likely
                            //no path mapping for a path starting with '..'.
                            //This can still fail, but catches the most reasonable
                            //uses of ..
                            break;
                        } else if (i > 0) {
                            name.splice(i - 1, 2);
                            i -= 2;
                        }
                    }
                }
                //end trimDots

                name = name.join("/");
            }
        }

        //Apply map config if available.
        if ((baseParts || starMap) && map) {
            nameParts = name.split('/');

            for (i = nameParts.length; i > 0; i -= 1) {
                nameSegment = nameParts.slice(0, i).join("/");

                if (baseParts) {
                    //Find the longest baseName segment match in the config.
                    //So, do joins on the biggest to smallest lengths of baseParts.
                    for (j = baseParts.length; j > 0; j -= 1) {
                        mapValue = map[baseParts.slice(0, j).join('/')];

                        //baseName segment has  config, find if it has one for
                        //this name.
                        if (mapValue) {
                            mapValue = mapValue[nameSegment];
                            if (mapValue) {
                                //Match, update name to the new value.
                                foundMap = mapValue;
                                foundI = i;
                                break;
                            }
                        }
                    }
                }

                if (foundMap) {
                    break;
                }

                //Check for a star map match, but just hold on to it,
                //if there is a shorter segment match later in a matching
                //config, then favor over this star map.
                if (!foundStarMap && starMap && starMap[nameSegment]) {
                    foundStarMap = starMap[nameSegment];
                    starI = i;
                }
            }

            if (!foundMap && foundStarMap) {
                foundMap = foundStarMap;
                foundI = starI;
            }

            if (foundMap) {
                nameParts.splice(0, foundI, foundMap);
                name = nameParts.join('/');
            }
        }

        return name;
    }

    function makeRequire(relName, forceSync) {
        return function () {
            //A version of a require function that passes a moduleName
            //value for items that may need to
            //look up paths relative to the moduleName
            return req.apply(undef, aps.call(arguments, 0).concat([relName, forceSync]));
        };
    }

    function makeNormalize(relName) {
        return function (name) {
            return normalize(name, relName);
        };
    }

    function makeLoad(depName) {
        return function (value) {
            defined[depName] = value;
        };
    }

    function callDep(name) {
        if (waiting.hasOwnProperty(name)) {
            var args = waiting[name];
            delete waiting[name];
            defining[name] = true;
            main.apply(undef, args);
        }

        if (!defined.hasOwnProperty(name) && !defining.hasOwnProperty(name)) {
            throw new Error('No ' + name);
        }
        return defined[name];
    }

    //Turns a plugin!resource to [plugin, resource]
    //with the plugin being undefined if the name
    //did not have a plugin prefix.
    function splitPrefix(name) {
        var prefix,
            index = name ? name.indexOf('!') : -1;
        if (index > -1) {
            prefix = name.substring(0, index);
            name = name.substring(index + 1, name.length);
        }
        return [prefix, name];
    }

    function onResourceLoad(name, defined, deps){
        if(requirejs.onResourceLoad && name){
            requirejs.onResourceLoad({defined:defined}, {id:name}, deps);
        }
    }

    /**
     * Makes a name map, normalizing the name, and using a plugin
     * for normalization if necessary. Grabs a ref to plugin
     * too, as an optimization.
     */
    makeMap = function (name, relName) {
        var plugin,
            parts = splitPrefix(name),
            prefix = parts[0];

        name = parts[1];

        if (prefix) {
            prefix = normalize(prefix, relName);
            plugin = callDep(prefix);
        }

        //Normalize according
        if (prefix) {
            if (plugin && plugin.normalize) {
                name = plugin.normalize(name, makeNormalize(relName));
            } else {
                name = normalize(name, relName);
            }
        } else {
            name = normalize(name, relName);
            parts = splitPrefix(name);
            prefix = parts[0];
            name = parts[1];
            if (prefix) {
                plugin = callDep(prefix);
            }
        }

        //Using ridiculous property names for space reasons
        return {
            f: prefix ? prefix + '!' + name : name, //fullName
            n: name,
            pr: prefix,
            p: plugin
        };
    };

    function makeConfig(name) {
        return function () {
            return (config && config.config && config.config[name]) || {};
        };
    }

    handlers = {
        require: function (name) {
            return makeRequire(name);
        },
        exports: function (name) {
            var e = defined[name];
            if (typeof e !== 'undefined') {
                return e;
            } else {
                return (defined[name] = {});
            }
        },
        module: function (name) {
            return {
                id: name,
                uri: '',
                exports: defined[name],
                config: makeConfig(name)
            };
        }
    };

    main = function (name, deps, callback, relName) {
        var cjsModule, depName, ret, map, i,
            args = [],
            usingExports;

        //Use name if no relName
        relName = relName || name;

        //Call the callback to define the module, if necessary.
        if (typeof callback === 'function') {

            //Pull out the defined dependencies and pass the ordered
            //values to the callback.
            //Default to [require, exports, module] if no deps
            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;
            for (i = 0; i < deps.length; i += 1) {
                map = makeMap(deps[i], relName);
                depName = map.f;

                //Fast path CommonJS standard dependencies.
                if (depName === "require") {
                    args[i] = handlers.require(name);
                } else if (depName === "exports") {
                    //CommonJS module spec 1.1
                    args[i] = handlers.exports(name);
                    usingExports = true;
                } else if (depName === "module") {
                    //CommonJS module spec 1.1
                    cjsModule = args[i] = handlers.module(name);
                } else if (defined.hasOwnProperty(depName) ||
                           waiting.hasOwnProperty(depName) ||
                           defining.hasOwnProperty(depName)) {
                    args[i] = callDep(depName);
                } else if (map.p) {
                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});
                    args[i] = defined[depName];
                } else {
                    throw new Error(name + ' missing ' + depName);
                }
            }

            ret = callback.apply(defined[name], args);

            if (name) {
                //If setting exports via "module" is in play,
                //favor that over return value and exports. After that,
                //favor a non-undefined return value over exports use.
                if (cjsModule && cjsModule.exports !== undef &&
                        cjsModule.exports !== defined[name]) {
                    defined[name] = cjsModule.exports;
                } else if (ret !== undef || !usingExports) {
                    //Use the return value from the function.
                    defined[name] = ret;
                }
            }
        } else if (name) {
            //May just be an object definition for the module. Only
            //worry about defining if have a module name.
            defined[name] = callback;
        }

        onResourceLoad(name, defined, args);
    };

    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {
        if (typeof deps === "string") {
            if (handlers[deps]) {
                //callback in this case is really relName
                return handlers[deps](callback);
            }
            //Just return the module wanted. In this scenario, the
            //deps arg is the module name, and second arg (if passed)
            //is just the relName.
            //Normalize module name, if it contains . or ..
            return callDep(makeMap(deps, callback).f);
        } else if (!deps.splice) {
            //deps is a config object, not an array.
            config = deps;
            if (callback.splice) {
                //callback is an array, which means it is a dependency list.
                //Adjust args if there are dependencies
                deps = callback;
                callback = relName;
                relName = null;
            } else {
                deps = undef;
            }
        }

        //Support require(['a'])
        callback = callback || function () {};

        //If relName is a function, it is an errback handler,
        //so remove it.
        if (typeof relName === 'function') {
            relName = forceSync;
            forceSync = alt;
        }

        //Simulate async callback;
        if (forceSync) {
            main(undef, deps, callback, relName);
        } else {
            setTimeout(function () {
                main(undef, deps, callback, relName);
            }, 15);
        }

        return req;
    };

    /**
     * Just drops the config on the floor, but returns req in case
     * the config return value is used.
     */
    req.config = function (cfg) {
        config = cfg;
        return req;
    };

    define = function (name, deps, callback) {

        //This module may not have dependencies
        if (!deps.splice) {
            //deps is not an array, so probably means
            //an object literal or factory function for
            //the value. Adjust args.
            callback = deps;
            deps = [];
        }

        waiting[name] = [name, deps, callback];
    };

    define.amd = {
        jQuery: true
    };
}());

define("../scripts/lib/almond-custom", function(){});

define('durandal/system',["require","jquery"],function(e,t){function n(e){var t="[object "+e+"]";i["is"+e]=function(e){return s.call(e)==t}}var i,a=!1,o=Object.keys,r=Object.prototype.hasOwnProperty,s=Object.prototype.toString,l=!1,c=Array.isArray,u=Array.prototype.slice;if(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(d){l=!0}e.on&&e.on("moduleLoaded",function(e,t){i.setModuleId(e,t)}),"undefined"!=typeof requirejs&&(requirejs.onResourceLoad=function(e,t){i.setModuleId(e.defined[t.id],t.id)});var f=function(){},v=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var e=0;e<arguments.length;)console.log("Item "+(e+1)+": "+arguments[e]),e++;else 1==u.call(arguments).length&&"string"==typeof u.call(arguments)[0]?console.log(u.call(arguments).toString()):console.log.apply(console,u.call(arguments));else Function.prototype.bind&&!l||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,u.call(arguments))}catch(t){}},g=function(e,t){var n;n=e instanceof Error?e:new Error(e),n.innerError=t;try{"undefined"!=typeof console&&"function"==typeof console.error?console.error(n):Function.prototype.bind&&!l||"undefined"==typeof console||"object"!=typeof console.error||Function.prototype.call.call(console.error,console,n)}catch(i){}throw n};i={version:"2.1.0",noop:f,getModuleId:function(e){return e?"function"==typeof e&&e.prototype?e.prototype.__moduleId__:"string"==typeof e?null:e.__moduleId__:null},setModuleId:function(e,t){return e?"function"==typeof e&&e.prototype?(e.prototype.__moduleId__=t,void 0):("string"!=typeof e&&(e.__moduleId__=t),void 0):void 0},resolveObject:function(e){return i.isFunction(e)?new e:e},debug:function(e){return 1==arguments.length&&(a=e,a?(this.log=v,this.error=g,this.log("Debug:Enabled")):(this.log("Debug:Disabled"),this.log=f,this.error=f)),a},log:f,error:f,assert:function(e,t){e||i.error(new Error(t||"Assert:Failed"))},defer:function(e){return t.Deferred(e)},guid:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=0|(e+16*Math.random())%16;return e=Math.floor(e/16),("x"==t?n:8|7&n).toString(16)})},acquire:function(){var t,n=arguments[0],a=!1;return i.isArray(n)?(t=n,a=!0):t=u.call(arguments,0),this.defer(function(n){e(t,function(){var e=arguments;setTimeout(function(){e.length>1||a?n.resolve(u.call(e,0)):n.resolve(e[0])},1)},function(e){n.reject(e)})}).promise()},extend:function(e){for(var t=u.call(arguments,1),n=0;n<t.length;n++){var i=t[n];if(i)for(var a in i)e[a]=i[a]}return e},wait:function(e){return i.defer(function(t){setTimeout(t.resolve,e)}).promise()}},i.keys=o||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)r.call(e,n)&&(t[t.length]=n);return t},i.isElement=function(e){return!(!e||1!==e.nodeType)},i.isArray=c||function(e){return"[object Array]"==s.call(e)},i.isObject=function(e){return e===Object(e)},i.isBoolean=function(e){return"boolean"==typeof e},i.isPromise=function(e){return e&&i.isFunction(e.then)};for(var h=["Arguments","Function","String","Number","Date","RegExp"],p=0;p<h.length;p++)n(h[p]);return i});
define('durandal/viewEngine',["durandal/system","jquery"],function(e,t){var n;return n=t.parseHTML?function(e){return t.parseHTML(e)}:function(e){return t(e).get()},{cache:{},viewExtension:".html",viewPlugin:"text",viewPluginParameters:"",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){var t=this.viewPlugin?this.viewPlugin+"!":"";return t+e+this.viewExtension+this.viewPluginParameters},parseMarkup:n,processMarkup:function(e){var t=this.parseMarkup(e);return this.ensureSingleElement(t)},ensureSingleElement:function(e){if(1==e.length)return e[0];for(var n=[],i=0;i<e.length;i++){var a=e[i];if(8!=a.nodeType){if(3==a.nodeType){var r=/\S/.test(a.nodeValue);if(!r)continue}n.push(a)}}return n.length>1?t(n).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):n[0]},tryGetViewFromCache:function(e){return this.cache[e]},putViewInCache:function(e,t){this.cache[e]=t},createView:function(t){var n=this,i=this.convertViewIdToRequirePath(t),a=this.tryGetViewFromCache(i);return a?e.defer(function(e){e.resolve(a.cloneNode(!0))}).promise():e.defer(function(a){e.acquire(i).then(function(e){var r=n.processMarkup(e);r.setAttribute("data-view",t),n.putViewInCache(i,r),a.resolve(r.cloneNode(!0))}).fail(function(e){n.createFallbackView(t,i,e).then(function(e){e.setAttribute("data-view",t),n.cache[i]=e,a.resolve(e.cloneNode(!0))})})}).promise()},createFallbackView:function(t,n){var i=this,a='View Not Found. Searched for "'+t+'" via path "'+n+'".';return e.defer(function(e){e.resolve(i.processMarkup('<div class="durandal-view-404">'+a+"</div>"))}).promise()}}});
define('durandal/viewLocator',["durandal/system","durandal/viewEngine"],function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=i.getAttribute("data-view");if(a==t)return i}}function i(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(e,t,n){e=e||"viewmodels",t=t||"views",n=n||t;var a=new RegExp(i(e),"gi");this.convertModuleIdToViewId=function(e){return e.replace(a,t)},this.translateViewIdToArea=function(e,t){return t&&"partial"!=t?n+"/"+t+"/"+e:n+"/"+e}},locateViewForObject:function(t,n,i){var a;if(t.getView&&(a=t.getView()))return this.locateView(a,n,i);if(t.viewUrl)return this.locateView(t.viewUrl,n,i);var r=e.getModuleId(t);return r?this.locateView(this.convertModuleIdToViewId(r),n,i):this.locateView(this.determineFallbackViewId(t),n,i)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/,n=t.exec(e.constructor.toString()),i=n&&n.length>1?n[1]:"";return i=i.trim(),"views/"+i},translateViewIdToArea:function(e){return e},locateView:function(i,a,r){if("string"==typeof i){var o;if(o=t.isViewUrl(i)?t.convertViewUrlToViewId(i):i,a&&(o=this.translateViewIdToArea(o,a)),r){var s=n(r,o);if(s)return e.defer(function(e){e.resolve(s)}).promise()}return t.createView(o)}return e.defer(function(e){e.resolve(i)}).promise()}}});
define('durandal/binder',["durandal/system","knockout"],function(e,t){function n(t){return void 0===t?{applyBindings:!0}:e.isBoolean(t)?{applyBindings:t}:(void 0===t.applyBindings&&(t.applyBindings=!0),t)}function i(i,c,u,d){if(!c||!u)return a.throwOnErrors?e.error(o):e.log(o,c,d),void 0;if(!c.getAttribute)return a.throwOnErrors?e.error(r):e.log(r,c,d),void 0;var f=c.getAttribute("data-view");try{var v;return i&&i.binding&&(v=i.binding(c)),v=n(v),a.binding(d,c,v),v.applyBindings?(e.log("Binding",f,d),t.applyBindings(u,c)):i&&t.utils.domData.set(c,l,{$data:i}),a.bindingComplete(d,c,v),i&&i.bindingComplete&&i.bindingComplete(c),t.utils.domData.set(c,s,v),v}catch(h){h.message=h.message+";\nView: "+f+";\nModuleId: "+e.getModuleId(d),a.throwOnErrors?e.error(h):e.log(h.message)}}var a,o="Insufficient Information to Bind",r="Unexpected View Type",s="durandal-binding-instruction",l="__ko_bindingContext__";return a={binding:e.noop,bindingComplete:e.noop,throwOnErrors:!1,getBindingInstruction:function(e){return t.utils.domData.get(e,s)},bindContext:function(e,t,n,a){return n&&e&&(e=e.createChildContext(n,"string"==typeof a?a:null)),i(n,t,e,n||(e?e.$data:null))},bind:function(e,t){return i(e,t,e,e)}}});
define('durandal/activator',["durandal/system","knockout"],function(e,t){function n(t){return void 0==t&&(t={}),e.isBoolean(t.closeOnDeactivate)||(t.closeOnDeactivate=c.defaults.closeOnDeactivate),t.beforeActivate||(t.beforeActivate=c.defaults.beforeActivate),t.afterDeactivate||(t.afterDeactivate=c.defaults.afterDeactivate),t.affirmations||(t.affirmations=c.defaults.affirmations),t.interpretResponse||(t.interpretResponse=c.defaults.interpretResponse),t.areSameItem||(t.areSameItem=c.defaults.areSameItem),t.findChildActivator||(t.findChildActivator=c.defaults.findChildActivator),t}function i(t,n,i){return e.isArray(i)?t[n].apply(t,i):t[n](i)}function a(t,n,i,a,o){if(t&&t.deactivate){e.log("Deactivating",t);var r;try{r=t.deactivate(n)}catch(s){return e.log("ERROR: "+s.message,s),a.resolve(!1),void 0}r&&r.then?r.then(function(){i.afterDeactivate(t,n,o),a.resolve(!0)},function(t){e.log(t),a.resolve(!1)}):(i.afterDeactivate(t,n,o),a.resolve(!0))}else t&&i.afterDeactivate(t,n,o),a.resolve(!0)}function o(t,n,a,o){var r;if(t&&t.activate){e.log("Activating",t);try{r=i(t,"activate",o)}catch(s){return e.log("ERROR: "+s.message,s),a(!1),void 0}}r&&r.then?r.then(function(){n(t),a(!0)},function(t){e.log("ERROR: "+t.message,t),a(!1)}):(n(t),a(!0))}function r(t,n,i,a){return a=e.extend({},u,a),i.lifecycleData=null,e.defer(function(o){function r(){if(t&&t.canDeactivate&&a.canDeactivate){var r;try{r=t.canDeactivate(n)}catch(s){return e.log("ERROR: "+s.message,s),o.resolve(!1),void 0}r.then?r.then(function(e){i.lifecycleData=e,o.resolve(i.interpretResponse(e))},function(t){e.log("ERROR: "+t.message,t),o.resolve(!1)}):(i.lifecycleData=r,o.resolve(i.interpretResponse(r)))}else o.resolve(!0)}var s=i.findChildActivator(t);s?s.canDeactivate().then(function(e){e?r():o.resolve(!1)}):r()}).promise()}function s(t,n,a,o,r){return a.lifecycleData=null,e.defer(function(s){if(a.areSameItem(n(),t,o,r))return s.resolve(!0),void 0;if(t&&t.canActivate){var l;try{l=i(t,"canActivate",r)}catch(c){return e.log("ERROR: "+c.message,c),s.resolve(!1),void 0}l.then?l.then(function(e){a.lifecycleData=e,s.resolve(a.interpretResponse(e))},function(t){e.log("ERROR: "+t.message,t),s.resolve(!1)}):(a.lifecycleData=l,s.resolve(a.interpretResponse(l)))}else s.resolve(!0)}).promise()}function l(i,l){var c,u=t.observable(null);l=n(l);var d=t.computed({read:function(){return u()},write:function(e){d.viaSetter=!0,d.activateItem(e)}});return d.__activator__=!0,d.settings=l,l.activator=d,d.isActivating=t.observable(!1),d.forceActiveItem=function(e){u(e)},d.canDeactivateItem=function(e,t,n){return r(e,t,l,n)},d.deactivateItem=function(t,n){return e.defer(function(e){d.canDeactivateItem(t,n).then(function(i){i?a(t,n,l,e,u):(d.notifySubscribers(),e.resolve(!1))})}).promise()},d.canActivateItem=function(e,t){return s(e,u,l,c,t)},d.activateItem=function(t,n,i){var r=d.viaSetter;return d.viaSetter=!1,e.defer(function(s){if(d.isActivating())return s.resolve(!1),void 0;d.isActivating(!0);var f=u();return l.areSameItem(f,t,c,n)?(d.isActivating(!1),s.resolve(!0),void 0):(d.canDeactivateItem(f,l.closeOnDeactivate,i).then(function(i){i?d.canActivateItem(t,n).then(function(i){i?e.defer(function(e){a(f,l.closeOnDeactivate,l,e)}).promise().then(function(){t=l.beforeActivate(t,n),o(t,u,function(e){c=n,d.isActivating(!1),s.resolve(e)},n)}):(r&&d.notifySubscribers(),d.isActivating(!1),s.resolve(!1))}):(r&&d.notifySubscribers(),d.isActivating(!1),s.resolve(!1))}),void 0)}).promise()},d.canActivate=function(){var e;return i?(e=i,i=!1):e=d(),d.canActivateItem(e)},d.activate=function(){var e;return i?(e=i,i=!1):e=d(),d.activateItem(e)},d.canDeactivate=function(e){return d.canDeactivateItem(d(),e)},d.deactivate=function(e){return d.deactivateItem(d(),e)},d.includeIn=function(e){e.canActivate=function(){return d.canActivate()},e.activate=function(){return d.activate()},e.canDeactivate=function(e){return d.canDeactivate(e)},e.deactivate=function(e){return d.deactivate(e)}},l.includeIn?d.includeIn(l.includeIn):i&&d.activate(),d.forItems=function(t){l.closeOnDeactivate=!1,l.determineNextItemToActivate=function(e,t){var n=t-1;return-1==n&&e.length>1?e[1]:n>-1&&n<e.length-1?e[n]:null},l.beforeActivate=function(e){var n=d();if(e){var i=t.indexOf(e);-1==i?t.push(e):e=t()[i]}else e=l.determineNextItemToActivate(t,n?t.indexOf(n):0);return e},l.afterDeactivate=function(e,n){n&&t.remove(e)};var n=d.canDeactivate;d.canDeactivate=function(i){return i?e.defer(function(e){function n(){for(var t=0;t<o.length;t++)if(!o[t])return e.resolve(!1),void 0;e.resolve(!0)}for(var a=t(),o=[],r=0;r<a.length;r++)d.canDeactivateItem(a[r],i).then(function(e){o.push(e),o.length==a.length&&n()})}).promise():n()};var i=d.deactivate;return d.deactivate=function(n){return n?e.defer(function(e){function i(i){setTimeout(function(){d.deactivateItem(i,n).then(function(){o++,t.remove(i),o==r&&e.resolve()})},1)}for(var a=t(),o=0,r=a.length,s=0;r>s;s++)i(a[s])}).promise():i()},d},d}var c,u={canDeactivate:!0},d={closeOnDeactivate:!0,affirmations:["yes","ok","true"],interpretResponse:function(n){return e.isObject(n)&&(n=n.can||!1),e.isString(n)?-1!==t.utils.arrayIndexOf(this.affirmations,n.toLowerCase()):n},areSameItem:function(e,t){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,n){t&&n&&n(null)},findChildActivator:function(){return null}};return c={defaults:d,create:l,isActivator:function(e){return e&&e.__activator__}}});
define('durandal/composition',["durandal/system","durandal/viewLocator","durandal/binder","durandal/viewEngine","durandal/activator","jquery","knockout"],function(e,t,n,i,a,o,r){function s(t,n,i){try{if(t.onError)try{t.onError(n,i)}catch(a){e.error(a)}else e.error(n)}finally{c(t,i,!0)}}function l(e){for(var t=[],n={childElements:t,activeView:null},i=r.virtualElements.firstChild(e);i;)1==i.nodeType&&(t.push(i),i.getAttribute(k)&&(n.activeView=i)),i=r.virtualElements.nextSibling(i);return n.activeView||(n.activeView=t[0]),n}function c(e,t,n){if(A--,0===A){var i=x;x=[],n||setTimeout(function(){for(var n=i.length;n--;)try{i[n]()}catch(a){s(e,a,t)}},1)}u(e)}function u(e){delete e.activeView,delete e.viewElements}function d(t,n,i,a){if(i)n();else if(t.activate&&t.model&&t.model.activate){var o;try{o=e.isArray(t.activationData)?t.model.activate.apply(t.model,t.activationData):t.model.activate(t.activationData),o&&o.then?o.then(n,function(e){s(t,e,a),n()}):o||void 0===o?n():c(t,a)}catch(r){s(t,r,a)}}else n()}function f(t,n){var t=this;if(t.activeView&&t.activeView.removeAttribute(k),t.child)try{t.model&&t.model.attached&&(t.composingNewView||t.alwaysTriggerAttach)&&t.model.attached(t.child,t.parent,t),t.attached&&t.attached(t.child,t.parent,t),t.child.setAttribute(k,!0),t.composingNewView&&t.model&&t.model.detached&&r.utils.domNodeDisposal.addDisposeCallback(t.child,function(){try{t.model.detached(t.child,t.parent,t)}catch(e){s(t,e,n)}})}catch(i){s(t,i,n)}t.triggerAttach=e.noop}function v(t){if(e.isString(t.transition)){if(t.activeView){if(t.activeView==t.child)return!1;if(!t.child)return!0;if(t.skipTransitionOnSameViewId){var n=t.activeView.getAttribute("data-view"),i=t.child.getAttribute("data-view");return n!=i}}return!0}return!1}function h(e){for(var t=0,n=e.length,i=[];n>t;t++){var a=e[t].cloneNode(!0);i.push(a)}return i}function p(t){var n=h(t.parts),i=w.getParts(n),a=w.getParts(t.child);for(var r in i){var s=a[r];s||(s=o('[data-part="'+r+'"]',t.child).get(0))?s.parentNode.replaceChild(i[r],s):e.log("Could not find part to override: "+r)}}function g(t){var n,i,a=r.virtualElements.childNodes(t.parent);if(!e.isArray(a)){var o=[];for(n=0,i=a.length;i>n;n++)o[n]=a[n];a=o}for(n=1,i=a.length;i>n;n++)r.removeNode(a[n])}function m(e){r.utils.domData.set(e,R,e.style.display),e.style.display="none"}function b(e){var t=r.utils.domData.get(e,R);e.style.display="none"===t?"block":t}function y(e){var t=e.getAttribute("data-bind");if(!t)return!1;for(var n=0,i=D.length;i>n;n++)if(t.indexOf(D[n])>-1)return!0;return!1}var w,S={},k="data-active-view",x=[],A=0,I="durandal-composition-data",T="data-part",M=["model","view","transition","area","strategy","activationData","onError"],R="durandal-visibility-data",D=["compose:"],C={complete:function(e){x.push(e)}};return w={composeBindings:D,convertTransitionToModuleId:function(e){return"transitions/"+e},defaultTransitionName:null,current:C,addBindingHandler:function(e,t,n){var i,a,o="composition-handler-"+e;t=t||r.bindingHandlers[e],n=n||function(){return void 0},a=r.bindingHandlers[e]={init:function(e,i,a,s,l){if(A>0){var c={trigger:r.observable(null)};w.current.complete(function(){t.init&&t.init(e,i,a,s,l),t.update&&(r.utils.domData.set(e,o,t),c.trigger("trigger"))}),r.utils.domData.set(e,o,c)}else r.utils.domData.set(e,o,t),t.init&&t.init(e,i,a,s,l);return n(e,i,a,s,l)},update:function(e,t,n,i,a){var s=r.utils.domData.get(e,o);return s.update?s.update(e,t,n,i,a):(s.trigger&&s.trigger(),void 0)}};for(i in t)"init"!==i&&"update"!==i&&(a[i]=t[i])},getParts:function(e,t){if(t=t||{},!e)return t;void 0===e.length&&(e=[e]);for(var n=0,i=e.length;i>n;n++){var a,o=e[n];o.getAttribute&&(a=o.getAttribute(T),a&&(t[a]=o),o.hasChildNodes()&&!y(o)&&w.getParts(o.childNodes,t))}return t},cloneNodes:h,finalize:function(t,i){if(void 0===t.transition&&(t.transition=this.defaultTransitionName),t.child||t.activeView)if(v(t)){var a=this.convertTransitionToModuleId(t.transition);e.acquire(a).then(function(e){t.transition=e,e(t).then(function(){if(t.cacheViews){if(t.activeView){var e=n.getBindingInstruction(t.activeView);e&&void 0!=e.cacheViews&&!e.cacheViews?r.removeNode(t.activeView):m(t.activeView)}}else t.child?g(t):r.virtualElements.emptyNode(t.parent);t.child&&b(t.child),t.triggerAttach(t,i),c(t,i)})}).fail(function(e){s(t,"Failed to load transition ("+a+"). Details: "+e.message,i)})}else{if(t.child!=t.activeView){if(t.cacheViews&&t.activeView){var o=n.getBindingInstruction(t.activeView);!o||void 0!=o.cacheViews&&!o.cacheViews?r.removeNode(t.activeView):m(t.activeView)}t.child?(t.cacheViews||g(t),b(t.child)):t.cacheViews||r.virtualElements.emptyNode(t.parent)}t.triggerAttach(t,i),c(t,i)}else t.cacheViews||r.virtualElements.emptyNode(t.parent),t.triggerAttach(t,i),c(t,i)},bindAndShow:function(e,t,a,o){a.child=e,a.parent.__composition_context=a,a.composingNewView=a.cacheViews?-1==r.utils.arrayIndexOf(a.viewElements,e):!0,d(a,function(){if(a.parent.__composition_context==a){if(delete a.parent.__composition_context,a.binding&&a.binding(a.child,a.parent,a),a.preserveContext&&a.bindingContext)a.composingNewView&&(a.parts&&p(a),m(e),r.virtualElements.prepend(a.parent,e),n.bindContext(a.bindingContext,e,a.model,a.as));else if(e){var o=a.model||S,s=r.dataFor(e);if(s!=o){if(!a.composingNewView)return r.removeNode(e),i.createView(e.getAttribute("data-view")).then(function(e){w.bindAndShow(e,t,a,!0)}),void 0;a.parts&&p(a),m(e),r.virtualElements.prepend(a.parent,e),n.bind(o,e)}}w.finalize(a,t)}else c(a,t)},o,t)},defaultStrategy:function(e){return t.locateViewForObject(e.model,e.area,e.viewElements)},getSettings:function(t){var n,o=t(),s=r.utils.unwrapObservable(o)||{},l=a.isActivator(o);if(e.isString(s))return s=i.isViewUrl(s)?{view:s}:{model:s,activate:!l};if(n=e.getModuleId(s))return s={model:s,activate:!l};!l&&s.model&&(l=a.isActivator(s.model));for(var c in s)s[c]=-1!=r.utils.arrayIndexOf(M,c)?r.utils.unwrapObservable(s[c]):s[c];return l?s.activate=!1:void 0===s.activate&&(s.activate=!0),s},executeStrategy:function(e,t){e.strategy(e).then(function(n){w.bindAndShow(n,t,e)})},inject:function(n,i){return n.model?n.view?(t.locateView(n.view,n.area,n.viewElements).then(function(e){w.bindAndShow(e,i,n)}),void 0):(n.strategy||(n.strategy=this.defaultStrategy),e.isString(n.strategy)?e.acquire(n.strategy).then(function(e){n.strategy=e,w.executeStrategy(n,i)}).fail(function(e){s(n,"Failed to load view strategy ("+n.strategy+"). Details: "+e.message,i)}):this.executeStrategy(n,i),void 0):(this.bindAndShow(null,i,n),void 0)},compose:function(n,i,a,o){A++,o||(i=w.getSettings(function(){return i},n)),i.compositionComplete&&x.push(function(){i.compositionComplete(i.child,i.parent,i)}),x.push(function(){i.composingNewView&&i.model&&i.model.compositionComplete&&i.model.compositionComplete(i.child,i.parent,i)});var r=l(n);i.activeView=r.activeView,i.parent=n,i.triggerAttach=f,i.bindingContext=a,i.cacheViews&&!i.viewElements&&(i.viewElements=r.childElements),i.model?e.isString(i.model)?e.acquire(i.model).then(function(t){i.model=e.resolveObject(t),w.inject(i,n)}).fail(function(e){s(i,"Failed to load composed module ("+i.model+"). Details: "+e.message,n)}):w.inject(i,n):i.view?(i.area=i.area||"partial",i.preserveContext=!0,t.locateView(i.view,i.area,i.viewElements).then(function(e){w.bindAndShow(e,n,i)})):this.bindAndShow(null,n,i)}},r.bindingHandlers.compose={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,a,o){var s=w.getSettings(t,e);if(s.mode){var l=r.utils.domData.get(e,I);if(!l){var c=r.virtualElements.childNodes(e);l={},"inline"===s.mode?l.view=i.ensureSingleElement(c):"templated"===s.mode&&(l.parts=h(c)),r.virtualElements.emptyNode(e),r.utils.domData.set(e,I,l)}"inline"===s.mode?s.view=l.view.cloneNode(!0):"templated"===s.mode&&(s.parts=l.parts),s.preserveContext=!0}w.compose(e,s,o,!0)}},r.virtualElements.allowedBindings.compose=!0,w});
define('durandal/events',["durandal/system"],function(e){var t=/\s+/,n=function(){},i=function(e,t){this.owner=e,this.events=t};return i.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},i.prototype.on=i.prototype.then,i.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(e,n,a){var o,r,s;if(n){for(o=this.callbacks||(this.callbacks={}),e=e.split(t);r=e.shift();)s=o[r]||(o[r]=[]),s.push(n,a);return this}return new i(this,e)},n.prototype.off=function(n,i,a){var o,r,s,l;if(!(r=this.callbacks))return this;if(!(n||i||a))return delete this.callbacks,this;for(n=n?n.split(t):e.keys(r);o=n.shift();)if((s=r[o])&&(i||a))for(l=s.length-2;l>=0;l-=2)i&&s[l]!==i||a&&s[l+1]!==a||s.splice(l,2);else delete r[o];return this},n.prototype.trigger=function(e){var n,i,a,o,r,s,l,c;if(!(i=this.callbacks))return this;for(c=[],e=e.split(t),o=1,r=arguments.length;r>o;o++)c[o-1]=arguments[o];for(;n=e.shift();){if((l=i.all)&&(l=l.slice()),(a=i[n])&&(a=a.slice()),a)for(o=0,r=a.length;r>o;o+=2)a[o].apply(a[o+1]||this,c);if(l)for(s=[n].concat(c),o=0,r=l.length;r>o;o+=2)l[o].apply(l[o+1]||this,s)}return this},n.prototype.proxy=function(e){var t=this;return function(n){t.trigger(e,n)}},n.includeIn=function(e){e.on=n.prototype.on,e.off=n.prototype.off,e.trigger=n.prototype.trigger,e.proxy=n.prototype.proxy},n});
define('durandal/app',["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,n,i,a){function o(){return e.defer(function(t){return 0==s.length?(t.resolve(),void 0):(e.acquire(s).then(function(n){for(var i=0;i<n.length;i++){var a=n[i];if(a.install){var o=l[i];e.isObject(o)||(o={}),a.install(o),e.log("Plugin:Installed "+s[i])}else e.log("Plugin:Loaded "+s[i])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)}),void 0)}).promise()}var r,s=[],l=[];return r={title:"Application",configurePlugins:function(t,n){var i=e.keys(t);n=n||"plugins/",-1===n.indexOf("/",n.length-1)&&(n+="/");for(var a=0;a<i.length;a++){var o=i[a];s.push(n+o),l.push(t[o])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){a(function(){o().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(i,a,o){function r(){if(l.model)if(l.model.canActivate)try{var t=l.model.canActivate();t&&t.then?t.then(function(e){e&&n.compose(s,l)}).fail(function(t){e.error(t)}):t&&n.compose(s,l)}catch(i){e.error(i)}else n.compose(s,l);else n.compose(s,l)}var s,l={activate:!0,transition:a};s=!o||e.isString(o)?document.getElementById(o||"applicationHost"):o,e.isString(i)?t.isViewUrl(i)?l.view=i:l.model=i:l.model=i,e.isString(l.model)?e.acquire(l.model).then(function(t){l.model=e.resolveObject(t),r()}).fail(function(t){e.error("Failed to load root module ("+l.model+"). Details: "+t.message)}):r()}},i.includeIn(r),r});
requirejs.config({paths:{text:"../scripts/lib/require/text",durandal:"../scripts/lib/durandal/js",plugins:"../scripts/lib/durandal/js/plugins",transitions:"../scripts/lib/durandal/js/transitions",chart:"../scripts/lib/chart"}}),define("jquery",[],function(){return jQuery}),define("knockout",[],function(){return ko}),define('main',["durandal/system","durandal/app","durandal/viewLocator"],function(e,t,n){e.debug(!0),t.title="Time Tracking",t.configurePlugins({router:!0,dialog:!0,widget:!0}),t.start().then(function(){n.useConvention(),t.setRoot("viewmodels/shell","entrance")})});
define('modules/authentication',['require'],function(e){function t(e,t){var n=e+":"+t,a="Basic "+window.btoa(n);return console.log("Resultado :: "+a),a}function n(){return i.getUser().then(function(e){a.user(e),a.isAuthenticated(!0)})}var a=e("../modules/context"),i=e("../modules/data/dataService"),o=e("plugins/router"),r=e("durandal/system");return{login:function(e,o,r){return a.sessionToken(t(e,o)),console.log("Token almacenado en el contexto: "+a.sessionToken()),i.authenticate().then(function(e){return a.sessionToken("Session "+e.access_token),r&&localStorage.setItem("auth",a.sessionToken()),n()})},logOff:function(){a.clear(),localStorage.removeItem("auth"),o.navigate("login",{trigger:!0,replace:!0})},authenticate:function(){return r.defer(function(e){var t=localStorage.getItem("auth");console.log("Token : "+t),t?(a.sessionToken(t),n().then(function(){e.resolve()}).fail(function(){e.reject()})):e.reject()}).promise()},init:function(){var e=this,t=function(e){return e.indexOf("login")>-1},n=function(){a.clear()},s=function(e){return e?"login?redirect="+e:"login"};o.guardRoute=function(i,o){return a.isAuthenticated()?!t(o.fragment):r.defer(function(a){e.authenticate().then(function(){a.resolve(t(o.fragment)?"#":!0)}).fail(function(){n(),a.resolve(t(o.fragment)?!0:s(o.fragment))})}).promise()},$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("Authorization",a.sessionToken())}}),i.setErrorHandlers(function(e){403!==e.status&&401!==e.status||!a.isAuthenticated()||(n(),o.isNavigating()||o.navigate(s(window.location.hash.replace("#",""))))})}}});
var Chart = function (s) {
    function v(a, c, b) { a = A((a - c.graphMin) / (c.steps * c.stepValue), 1, 0); return b * c.steps * a } function x(a, c, b, e) { function h() { g += f; var k = a.animation ? A(d(g), null, 0) : 1; e.clearRect(0, 0, q, u); a.scaleOverlay ? (b(k), c()) : (c(), b(k)); if (1 >= g) D(h); else if ("function" == typeof a.onAnimationComplete) a.onAnimationComplete() } var f = a.animation ? 1 / A(a.animationSteps, Number.MAX_VALUE, 1) : 1, d = B[a.animationEasing], g = a.animation ? 0 : 1; "function" !== typeof c && (c = function () { }); D(h) } function C(a, c, b, e, h, f) {
        var d; a =
        Math.floor(Math.log(e - h) / Math.LN10); h = Math.floor(h / (1 * Math.pow(10, a))) * Math.pow(10, a); e = Math.ceil(e / (1 * Math.pow(10, a))) * Math.pow(10, a) - h; a = Math.pow(10, a); for (d = Math.round(e / a) ; d < b || d > c;) a = d < b ? a / 2 : 2 * a, d = Math.round(e / a); c = []; z(f, c, d, h, a); return { steps: d, stepValue: a, graphMin: h, labels: c }
    } function z(a, c, b, e, h) { if (a) for (var f = 1; f < b + 1; f++) c.push(E(a, { value: (e + h * f).toFixed(0 != h % 1 ? h.toString().split(".")[1].length : 0) })) } function A(a, c, b) {
        return !isNaN(parseFloat(c)) && isFinite(c) && a > c ? c : !isNaN(parseFloat(b)) &&
        isFinite(b) && a < b ? b : a
    } function y(a, c) { var b = {}, e; for (e in a) b[e] = a[e]; for (e in c) b[e] = c[e]; return b } function E(a, c) {
        var b = !/\W/.test(a) ? F[a] = F[a] || E(document.getElementById(a).innerHTML) : new Function("obj", "var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('" + a.replace(/[\r\t\n]/g, " ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g, "$1\r").replace(/\t=(.*?)%>/g, "',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'") + "');}return p.join('');"); return c ?
        b(c) : b
    } var r = this, B = {
        linear: function (a) { return a }, easeInQuad: function (a) { return a * a }, easeOutQuad: function (a) { return -1 * a * (a - 2) }, easeInOutQuad: function (a) { return 1 > (a /= 0.5) ? 0.5 * a * a : -0.5 * (--a * (a - 2) - 1) }, easeInCubic: function (a) { return a * a * a }, easeOutCubic: function (a) { return 1 * ((a = a / 1 - 1) * a * a + 1) }, easeInOutCubic: function (a) { return 1 > (a /= 0.5) ? 0.5 * a * a * a : 0.5 * ((a -= 2) * a * a + 2) }, easeInQuart: function (a) { return a * a * a * a }, easeOutQuart: function (a) { return -1 * ((a = a / 1 - 1) * a * a * a - 1) }, easeInOutQuart: function (a) {
            return 1 > (a /= 0.5) ?
            0.5 * a * a * a * a : -0.5 * ((a -= 2) * a * a * a - 2)
        }, easeInQuint: function (a) { return 1 * (a /= 1) * a * a * a * a }, easeOutQuint: function (a) { return 1 * ((a = a / 1 - 1) * a * a * a * a + 1) }, easeInOutQuint: function (a) { return 1 > (a /= 0.5) ? 0.5 * a * a * a * a * a : 0.5 * ((a -= 2) * a * a * a * a + 2) }, easeInSine: function (a) { return -1 * Math.cos(a / 1 * (Math.PI / 2)) + 1 }, easeOutSine: function (a) { return 1 * Math.sin(a / 1 * (Math.PI / 2)) }, easeInOutSine: function (a) { return -0.5 * (Math.cos(Math.PI * a / 1) - 1) }, easeInExpo: function (a) { return 0 == a ? 1 : 1 * Math.pow(2, 10 * (a / 1 - 1)) }, easeOutExpo: function (a) {
            return 1 ==
            a ? 1 : 1 * (-Math.pow(2, -10 * a / 1) + 1)
        }, easeInOutExpo: function (a) { return 0 == a ? 0 : 1 == a ? 1 : 1 > (a /= 0.5) ? 0.5 * Math.pow(2, 10 * (a - 1)) : 0.5 * (-Math.pow(2, -10 * --a) + 2) }, easeInCirc: function (a) { return 1 <= a ? a : -1 * (Math.sqrt(1 - (a /= 1) * a) - 1) }, easeOutCirc: function (a) { return 1 * Math.sqrt(1 - (a = a / 1 - 1) * a) }, easeInOutCirc: function (a) { return 1 > (a /= 0.5) ? -0.5 * (Math.sqrt(1 - a * a) - 1) : 0.5 * (Math.sqrt(1 - (a -= 2) * a) + 1) }, easeInElastic: function (a) {
            var c = 1.70158, b = 0, e = 1; if (0 == a) return 0; if (1 == (a /= 1)) return 1; b || (b = 0.3); e < Math.abs(1) ? (e = 1, c = b / 4) : c = b / (2 *
            Math.PI) * Math.asin(1 / e); return -(e * Math.pow(2, 10 * (a -= 1)) * Math.sin((1 * a - c) * 2 * Math.PI / b))
        }, easeOutElastic: function (a) { var c = 1.70158, b = 0, e = 1; if (0 == a) return 0; if (1 == (a /= 1)) return 1; b || (b = 0.3); e < Math.abs(1) ? (e = 1, c = b / 4) : c = b / (2 * Math.PI) * Math.asin(1 / e); return e * Math.pow(2, -10 * a) * Math.sin((1 * a - c) * 2 * Math.PI / b) + 1 }, easeInOutElastic: function (a) {
            var c = 1.70158, b = 0, e = 1; if (0 == a) return 0; if (2 == (a /= 0.5)) return 1; b || (b = 1 * 0.3 * 1.5); e < Math.abs(1) ? (e = 1, c = b / 4) : c = b / (2 * Math.PI) * Math.asin(1 / e); return 1 > a ? -0.5 * e * Math.pow(2, 10 *
            (a -= 1)) * Math.sin((1 * a - c) * 2 * Math.PI / b) : 0.5 * e * Math.pow(2, -10 * (a -= 1)) * Math.sin((1 * a - c) * 2 * Math.PI / b) + 1
        }, easeInBack: function (a) { return 1 * (a /= 1) * a * (2.70158 * a - 1.70158) }, easeOutBack: function (a) { return 1 * ((a = a / 1 - 1) * a * (2.70158 * a + 1.70158) + 1) }, easeInOutBack: function (a) { var c = 1.70158; return 1 > (a /= 0.5) ? 0.5 * a * a * (((c *= 1.525) + 1) * a - c) : 0.5 * ((a -= 2) * a * (((c *= 1.525) + 1) * a + c) + 2) }, easeInBounce: function (a) { return 1 - B.easeOutBounce(1 - a) }, easeOutBounce: function (a) {
            return (a /= 1) < 1 / 2.75 ? 1 * 7.5625 * a * a : a < 2 / 2.75 ? 1 * (7.5625 * (a -= 1.5 / 2.75) *
            a + 0.75) : a < 2.5 / 2.75 ? 1 * (7.5625 * (a -= 2.25 / 2.75) * a + 0.9375) : 1 * (7.5625 * (a -= 2.625 / 2.75) * a + 0.984375)
        }, easeInOutBounce: function (a) { return 0.5 > a ? 0.5 * B.easeInBounce(2 * a) : 0.5 * B.easeOutBounce(2 * a - 1) + 0.5 }
    }, q = s.canvas.width, u = s.canvas.height; window.devicePixelRatio && (s.canvas.style.width = q + "px", s.canvas.style.height = u + "px", s.canvas.height = u * window.devicePixelRatio, s.canvas.width = q * window.devicePixelRatio, s.scale(window.devicePixelRatio, window.devicePixelRatio)); this.PolarArea = function (a, c) {
        r.PolarArea.defaults = {
            scaleOverlay: !0,
            scaleOverride: !1, scaleSteps: null, scaleStepWidth: null, scaleStartValue: null, scaleShowLine: !0, scaleLineColor: "rgba(0,0,0,.1)", scaleLineWidth: 1, scaleShowLabels: !0, scaleLabel: "<%=value%>", scaleFontFamily: "'Arial'", scaleFontSize: 12, scaleFontStyle: "normal", scaleFontColor: "#666", scaleShowLabelBackdrop: !0, scaleBackdropColor: "rgba(255,255,255,0.75)", scaleBackdropPaddingY: 2, scaleBackdropPaddingX: 2, segmentShowStroke: !0, segmentStrokeColor: "#fff", segmentStrokeWidth: 2, animation: !0, animationSteps: 100, animationEasing: "easeOutBounce",
            animateRotate: !0, animateScale: !1, onAnimationComplete: null
        }; var b = c ? y(r.PolarArea.defaults, c) : r.PolarArea.defaults; return new G(a, b, s)
    }; this.Radar = function (a, c) {
        r.Radar.defaults = {
            scaleOverlay: !1, scaleOverride: !1, scaleSteps: null, scaleStepWidth: null, scaleStartValue: null, scaleShowLine: !0, scaleLineColor: "rgba(0,0,0,.1)", scaleLineWidth: 1, scaleShowLabels: !1, scaleLabel: "<%=value%>", scaleFontFamily: "'Arial'", scaleFontSize: 12, scaleFontStyle: "normal", scaleFontColor: "#666", scaleShowLabelBackdrop: !0, scaleBackdropColor: "rgba(255,255,255,0.75)",
            scaleBackdropPaddingY: 2, scaleBackdropPaddingX: 2, angleShowLineOut: !0, angleLineColor: "rgba(0,0,0,.1)", angleLineWidth: 1, pointLabelFontFamily: "'Arial'", pointLabelFontStyle: "normal", pointLabelFontSize: 12, pointLabelFontColor: "#666", pointDot: !0, pointDotRadius: 3, pointDotStrokeWidth: 1, datasetStroke: !0, datasetStrokeWidth: 2, datasetFill: !0, animation: !0, animationSteps: 60, animationEasing: "easeOutQuart", onAnimationComplete: null
        }; var b = c ? y(r.Radar.defaults, c) : r.Radar.defaults; return new H(a, b, s)
    }; this.Pie = function (a,
    c) { r.Pie.defaults = { segmentShowStroke: !0, segmentStrokeColor: "#fff", segmentStrokeWidth: 2, animation: !0, animationSteps: 100, animationEasing: "easeOutBounce", animateRotate: !0, animateScale: !1, onAnimationComplete: null }; var b = c ? y(r.Pie.defaults, c) : r.Pie.defaults; return new I(a, b, s) }; this.Doughnut = function (a, c) {
        r.Doughnut.defaults = {
            segmentShowStroke: !0, segmentStrokeColor: "#fff", segmentStrokeWidth: 2, percentageInnerCutout: 50, animation: !0, animationSteps: 100, animationEasing: "easeOutBounce", animateRotate: !0, animateScale: !1,
            onAnimationComplete: null
        }; var b = c ? y(r.Doughnut.defaults, c) : r.Doughnut.defaults; return new J(a, b, s)
    }; this.Line = function (a, c) {
        r.Line.defaults = {
            scaleOverlay: !1, scaleOverride: !1, scaleSteps: null, scaleStepWidth: null, scaleStartValue: null, scaleLineColor: "rgba(0,0,0,.1)", scaleLineWidth: 1, scaleShowLabels: !0, scaleLabel: "<%=value%>", scaleFontFamily: "'Arial'", scaleFontSize: 12, scaleFontStyle: "normal", scaleFontColor: "#666", scaleShowGridLines: !0, scaleGridLineColor: "rgba(0,0,0,.05)", scaleGridLineWidth: 1, bezierCurve: !0,
            pointDot: !0, pointDotRadius: 4, pointDotStrokeWidth: 2, datasetStroke: !0, datasetStrokeWidth: 2, datasetFill: !0, animation: !0, animationSteps: 60, animationEasing: "easeOutQuart", onAnimationComplete: null
        }; var b = c ? y(r.Line.defaults, c) : r.Line.defaults; return new K(a, b, s)
    }; this.Bar = function (a, c) {
        r.Bar.defaults = {
            scaleOverlay: !1, scaleOverride: !1, scaleSteps: null, scaleStepWidth: null, scaleStartValue: null, scaleLineColor: "rgba(0,0,0,.1)", scaleLineWidth: 1, scaleShowLabels: !0, scaleLabel: "<%=value%>", scaleFontFamily: "'Arial'",
            scaleFontSize: 12, scaleFontStyle: "normal", scaleFontColor: "#666", scaleShowGridLines: !0, scaleGridLineColor: "rgba(0,0,0,.05)", scaleGridLineWidth: 1, barShowStroke: !0, barStrokeWidth: 2, barValueSpacing: 5, barDatasetSpacing: 1, animation: !0, animationSteps: 60, animationEasing: "easeOutQuart", onAnimationComplete: null
        }; var b = c ? y(r.Bar.defaults, c) : r.Bar.defaults; return new L(a, b, s)
    }; var G = function (a, c, b) {
        var e, h, f, d, g, k, j, l, m; g = Math.min.apply(Math, [q, u]) / 2; g -= Math.max.apply(Math, [0.5 * c.scaleFontSize, 0.5 * c.scaleLineWidth]);
        d = 2 * c.scaleFontSize; c.scaleShowLabelBackdrop && (d += 2 * c.scaleBackdropPaddingY, g -= 1.5 * c.scaleBackdropPaddingY); l = g; d = d ? d : 5; e = Number.MIN_VALUE; h = Number.MAX_VALUE; for (f = 0; f < a.length; f++) a[f].value > e && (e = a[f].value), a[f].value < h && (h = a[f].value); f = Math.floor(l / (0.66 * d)); d = Math.floor(0.5 * (l / d)); m = c.scaleShowLabels ? c.scaleLabel : null; c.scaleOverride ? (j = { steps: c.scaleSteps, stepValue: c.scaleStepWidth, graphMin: c.scaleStartValue, labels: [] }, z(m, j.labels, j.steps, c.scaleStartValue, c.scaleStepWidth)) : j = C(l, f, d, e, h,
        m); k = g / j.steps; x(c, function () {
            for (var a = 0; a < j.steps; a++) if (c.scaleShowLine && (b.beginPath(), b.arc(q / 2, u / 2, k * (a + 1), 0, 2 * Math.PI, !0), b.strokeStyle = c.scaleLineColor, b.lineWidth = c.scaleLineWidth, b.stroke()), c.scaleShowLabels) {
                b.textAlign = "center"; b.font = c.scaleFontStyle + " " + c.scaleFontSize + "px " + c.scaleFontFamily; var e = j.labels[a]; if (c.scaleShowLabelBackdrop) {
                    var d = b.measureText(e).width; b.fillStyle = c.scaleBackdropColor; b.beginPath(); b.rect(Math.round(q / 2 - d / 2 - c.scaleBackdropPaddingX), Math.round(u / 2 - k * (a +
                    1) - 0.5 * c.scaleFontSize - c.scaleBackdropPaddingY), Math.round(d + 2 * c.scaleBackdropPaddingX), Math.round(c.scaleFontSize + 2 * c.scaleBackdropPaddingY)); b.fill()
                } b.textBaseline = "middle"; b.fillStyle = c.scaleFontColor; b.fillText(e, q / 2, u / 2 - k * (a + 1))
            }
        }, function (e) {
            var d = -Math.PI / 2, g = 2 * Math.PI / a.length, f = 1, h = 1; c.animation && (c.animateScale && (f = e), c.animateRotate && (h = e)); for (e = 0; e < a.length; e++) b.beginPath(), b.arc(q / 2, u / 2, f * v(a[e].value, j, k), d, d + h * g, !1), b.lineTo(q / 2, u / 2), b.closePath(), b.fillStyle = a[e].color, b.fill(),
            c.segmentShowStroke && (b.strokeStyle = c.segmentStrokeColor, b.lineWidth = c.segmentStrokeWidth, b.stroke()), d += h * g
        }, b)
    }, H = function (a, c, b) {
        var e, h, f, d, g, k, j, l, m; a.labels || (a.labels = []); g = Math.min.apply(Math, [q, u]) / 2; d = 2 * c.scaleFontSize; for (e = l = 0; e < a.labels.length; e++) b.font = c.pointLabelFontStyle + " " + c.pointLabelFontSize + "px " + c.pointLabelFontFamily, h = b.measureText(a.labels[e]).width, h > l && (l = h); g -= Math.max.apply(Math, [l, 1.5 * (c.pointLabelFontSize / 2)]); g -= c.pointLabelFontSize; l = g = A(g, null, 0); d = d ? d : 5; e = Number.MIN_VALUE;
        h = Number.MAX_VALUE; for (f = 0; f < a.datasets.length; f++) for (m = 0; m < a.datasets[f].data.length; m++) a.datasets[f].data[m] > e && (e = a.datasets[f].data[m]), a.datasets[f].data[m] < h && (h = a.datasets[f].data[m]); f = Math.floor(l / (0.66 * d)); d = Math.floor(0.5 * (l / d)); m = c.scaleShowLabels ? c.scaleLabel : null; c.scaleOverride ? (j = { steps: c.scaleSteps, stepValue: c.scaleStepWidth, graphMin: c.scaleStartValue, labels: [] }, z(m, j.labels, j.steps, c.scaleStartValue, c.scaleStepWidth)) : j = C(l, f, d, e, h, m); k = g / j.steps; x(c, function () {
            var e = 2 * Math.PI /
            a.datasets[0].data.length; b.save(); b.translate(q / 2, u / 2); if (c.angleShowLineOut) { b.strokeStyle = c.angleLineColor; b.lineWidth = c.angleLineWidth; for (var d = 0; d < a.datasets[0].data.length; d++) b.rotate(e), b.beginPath(), b.moveTo(0, 0), b.lineTo(0, -g), b.stroke() } for (d = 0; d < j.steps; d++) {
                b.beginPath(); if (c.scaleShowLine) { b.strokeStyle = c.scaleLineColor; b.lineWidth = c.scaleLineWidth; b.moveTo(0, -k * (d + 1)); for (var f = 0; f < a.datasets[0].data.length; f++) b.rotate(e), b.lineTo(0, -k * (d + 1)); b.closePath(); b.stroke() } c.scaleShowLabels &&
                (b.textAlign = "center", b.font = c.scaleFontStyle + " " + c.scaleFontSize + "px " + c.scaleFontFamily, b.textBaseline = "middle", c.scaleShowLabelBackdrop && (f = b.measureText(j.labels[d]).width, b.fillStyle = c.scaleBackdropColor, b.beginPath(), b.rect(Math.round(-f / 2 - c.scaleBackdropPaddingX), Math.round(-k * (d + 1) - 0.5 * c.scaleFontSize - c.scaleBackdropPaddingY), Math.round(f + 2 * c.scaleBackdropPaddingX), Math.round(c.scaleFontSize + 2 * c.scaleBackdropPaddingY)), b.fill()), b.fillStyle = c.scaleFontColor, b.fillText(j.labels[d], 0, -k * (d +
                1)))
            } for (d = 0; d < a.labels.length; d++) { b.font = c.pointLabelFontStyle + " " + c.pointLabelFontSize + "px " + c.pointLabelFontFamily; b.fillStyle = c.pointLabelFontColor; var f = Math.sin(e * d) * (g + c.pointLabelFontSize), h = Math.cos(e * d) * (g + c.pointLabelFontSize); b.textAlign = e * d == Math.PI || 0 == e * d ? "center" : e * d > Math.PI ? "right" : "left"; b.textBaseline = "middle"; b.fillText(a.labels[d], f, -h) } b.restore()
        }, function (d) {
            var e = 2 * Math.PI / a.datasets[0].data.length; b.save(); b.translate(q / 2, u / 2); for (var g = 0; g < a.datasets.length; g++) {
                b.beginPath();
                b.moveTo(0, d * -1 * v(a.datasets[g].data[0], j, k)); for (var f = 1; f < a.datasets[g].data.length; f++) b.rotate(e), b.lineTo(0, d * -1 * v(a.datasets[g].data[f], j, k)); b.closePath(); b.fillStyle = a.datasets[g].fillColor; b.strokeStyle = a.datasets[g].strokeColor; b.lineWidth = c.datasetStrokeWidth; b.fill(); b.stroke(); if (c.pointDot) {
                    b.fillStyle = a.datasets[g].pointColor; b.strokeStyle = a.datasets[g].pointStrokeColor; b.lineWidth = c.pointDotStrokeWidth; for (f = 0; f < a.datasets[g].data.length; f++) b.rotate(e), b.beginPath(), b.arc(0, d * -1 *
                    v(a.datasets[g].data[f], j, k), c.pointDotRadius, 2 * Math.PI, !1), b.fill(), b.stroke()
                } b.rotate(e)
            } b.restore()
        }, b)
    }, I = function (a, c, b) {
        for (var e = 0, h = Math.min.apply(Math, [u / 2, q / 2]) - 5, f = 0; f < a.length; f++) e += a[f].value; x(c, null, function (d) {
            var g = -Math.PI / 2, f = 1, j = 1; c.animation && (c.animateScale && (f = d), c.animateRotate && (j = d)); for (d = 0; d < a.length; d++) {
                var l = j * a[d].value / e * 2 * Math.PI; b.beginPath(); b.arc(q / 2, u / 2, f * h, g, g + l); b.lineTo(q / 2, u / 2); b.closePath(); b.fillStyle = a[d].color; b.fill(); c.segmentShowStroke && (b.lineWidth =
                c.segmentStrokeWidth, b.strokeStyle = c.segmentStrokeColor, b.stroke()); g += l
            }
        }, b)
    }, J = function (a, c, b) {
        for (var e = 0, h = Math.min.apply(Math, [u / 2, q / 2]) - 5, f = h * (c.percentageInnerCutout / 100), d = 0; d < a.length; d++) e += a[d].value; x(c, null, function (d) {
            var k = -Math.PI / 2, j = 1, l = 1; c.animation && (c.animateScale && (j = d), c.animateRotate && (l = d)); for (d = 0; d < a.length; d++) {
                var m = l * a[d].value / e * 2 * Math.PI; b.beginPath(); b.arc(q / 2, u / 2, j * h, k, k + m, !1); b.arc(q / 2, u / 2, j * f, k + m, k, !0); b.closePath(); b.fillStyle = a[d].color; b.fill(); c.segmentShowStroke &&
                (b.lineWidth = c.segmentStrokeWidth, b.strokeStyle = c.segmentStrokeColor, b.stroke()); k += m
            }
        }, b)
    }, K = function (a, c, b) {
        var e, h, f, d, g, k, j, l, m, t, r, n, p, s = 0; g = u; b.font = c.scaleFontStyle + " " + c.scaleFontSize + "px " + c.scaleFontFamily; t = 1; for (d = 0; d < a.labels.length; d++) e = b.measureText(a.labels[d]).width, t = e > t ? e : t; q / a.labels.length < t ? (s = 45, q / a.labels.length < Math.cos(s) * t ? (s = 90, g -= t) : g -= Math.sin(s) * t) : g -= c.scaleFontSize; d = c.scaleFontSize; g = g - 5 - d; e = Number.MIN_VALUE; h = Number.MAX_VALUE; for (f = 0; f < a.datasets.length; f++) for (l =
        0; l < a.datasets[f].data.length; l++) a.datasets[f].data[l] > e && (e = a.datasets[f].data[l]), a.datasets[f].data[l] < h && (h = a.datasets[f].data[l]); f = Math.floor(g / (0.66 * d)); d = Math.floor(0.5 * (g / d)); l = c.scaleShowLabels ? c.scaleLabel : ""; c.scaleOverride ? (j = { steps: c.scaleSteps, stepValue: c.scaleStepWidth, graphMin: c.scaleStartValue, labels: [] }, z(l, j.labels, j.steps, c.scaleStartValue, c.scaleStepWidth)) : j = C(g, f, d, e, h, l); k = Math.floor(g / j.steps); d = 1; if (c.scaleShowLabels) {
            b.font = c.scaleFontStyle + " " + c.scaleFontSize + "px " + c.scaleFontFamily;
            for (e = 0; e < j.labels.length; e++) h = b.measureText(j.labels[e]).width, d = h > d ? h : d; d += 10
        } r = q - d - t; m = Math.floor(r / (a.labels.length - 1)); n = q - t / 2 - r; p = g + c.scaleFontSize / 2; x(c, function () {
            b.lineWidth = c.scaleLineWidth; b.strokeStyle = c.scaleLineColor; b.beginPath(); b.moveTo(q - t / 2 + 5, p); b.lineTo(q - t / 2 - r - 5, p); b.stroke(); 0 < s ? (b.save(), b.textAlign = "right") : b.textAlign = "center"; b.fillStyle = c.scaleFontColor; for (var d = 0; d < a.labels.length; d++) b.save(), 0 < s ? (b.translate(n + d * m, p + c.scaleFontSize), b.rotate(-(s * (Math.PI / 180))), b.fillText(a.labels[d],
            0, 0), b.restore()) : b.fillText(a.labels[d], n + d * m, p + c.scaleFontSize + 3), b.beginPath(), b.moveTo(n + d * m, p + 3), c.scaleShowGridLines && 0 < d ? (b.lineWidth = c.scaleGridLineWidth, b.strokeStyle = c.scaleGridLineColor, b.lineTo(n + d * m, 5)) : b.lineTo(n + d * m, p + 3), b.stroke(); b.lineWidth = c.scaleLineWidth; b.strokeStyle = c.scaleLineColor; b.beginPath(); b.moveTo(n, p + 5); b.lineTo(n, 5); b.stroke(); b.textAlign = "right"; b.textBaseline = "middle"; for (d = 0; d < j.steps; d++) b.beginPath(), b.moveTo(n - 3, p - (d + 1) * k), c.scaleShowGridLines ? (b.lineWidth = c.scaleGridLineWidth,
            b.strokeStyle = c.scaleGridLineColor, b.lineTo(n + r + 5, p - (d + 1) * k)) : b.lineTo(n - 0.5, p - (d + 1) * k), b.stroke(), c.scaleShowLabels && b.fillText(j.labels[d], n - 8, p - (d + 1) * k)
        }, function (d) {
            function e(b, c) { return p - d * v(a.datasets[b].data[c], j, k) } for (var f = 0; f < a.datasets.length; f++) {
                b.strokeStyle = a.datasets[f].strokeColor; b.lineWidth = c.datasetStrokeWidth; b.beginPath(); b.moveTo(n, p - d * v(a.datasets[f].data[0], j, k)); for (var g = 1; g < a.datasets[f].data.length; g++) c.bezierCurve ? b.bezierCurveTo(n + m * (g - 0.5), e(f, g - 1), n + m * (g - 0.5),
                e(f, g), n + m * g, e(f, g)) : b.lineTo(n + m * g, e(f, g)); b.stroke(); c.datasetFill ? (b.lineTo(n + m * (a.datasets[f].data.length - 1), p), b.lineTo(n, p), b.closePath(), b.fillStyle = a.datasets[f].fillColor, b.fill()) : b.closePath(); if (c.pointDot) { b.fillStyle = a.datasets[f].pointColor; b.strokeStyle = a.datasets[f].pointStrokeColor; b.lineWidth = c.pointDotStrokeWidth; for (g = 0; g < a.datasets[f].data.length; g++) b.beginPath(), b.arc(n + m * g, p - d * v(a.datasets[f].data[g], j, k), c.pointDotRadius, 0, 2 * Math.PI, !0), b.fill(), b.stroke() }
            }
        }, b)
    }, L = function (a,
    c, b) {
        var e, h, f, d, g, k, j, l, m, t, r, n, p, s, w = 0; g = u; b.font = c.scaleFontStyle + " " + c.scaleFontSize + "px " + c.scaleFontFamily; t = 1; for (d = 0; d < a.labels.length; d++) e = b.measureText(a.labels[d]).width, t = e > t ? e : t; q / a.labels.length < t ? (w = 45, q / a.labels.length < Math.cos(w) * t ? (w = 90, g -= t) : g -= Math.sin(w) * t) : g -= c.scaleFontSize; d = c.scaleFontSize; g = g - 5 - d; e = Number.MIN_VALUE; h = Number.MAX_VALUE; for (f = 0; f < a.datasets.length; f++) for (l = 0; l < a.datasets[f].data.length; l++) a.datasets[f].data[l] > e && (e = a.datasets[f].data[l]), a.datasets[f].data[l] <
        h && (h = a.datasets[f].data[l]); f = Math.floor(g / (0.66 * d)); d = Math.floor(0.5 * (g / d)); l = c.scaleShowLabels ? c.scaleLabel : ""; c.scaleOverride ? (j = { steps: c.scaleSteps, stepValue: c.scaleStepWidth, graphMin: c.scaleStartValue, labels: [] }, z(l, j.labels, j.steps, c.scaleStartValue, c.scaleStepWidth)) : j = C(g, f, d, e, h, l); k = Math.floor(g / j.steps); d = 1; if (c.scaleShowLabels) { b.font = c.scaleFontStyle + " " + c.scaleFontSize + "px " + c.scaleFontFamily; for (e = 0; e < j.labels.length; e++) h = b.measureText(j.labels[e]).width, d = h > d ? h : d; d += 10 } r = q - d - t; m =
        Math.floor(r / a.labels.length); s = (m - 2 * c.scaleGridLineWidth - 2 * c.barValueSpacing - (c.barDatasetSpacing * a.datasets.length - 1) - (c.barStrokeWidth / 2 * a.datasets.length - 1)) / a.datasets.length; n = q - t / 2 - r; p = g + c.scaleFontSize / 2; x(c, function () {
            b.lineWidth = c.scaleLineWidth; b.strokeStyle = c.scaleLineColor; b.beginPath(); b.moveTo(q - t / 2 + 5, p); b.lineTo(q - t / 2 - r - 5, p); b.stroke(); 0 < w ? (b.save(), b.textAlign = "right") : b.textAlign = "center"; b.fillStyle = c.scaleFontColor; for (var d = 0; d < a.labels.length; d++) b.save(), 0 < w ? (b.translate(n +
            d * m, p + c.scaleFontSize), b.rotate(-(w * (Math.PI / 180))), b.fillText(a.labels[d], 0, 0), b.restore()) : b.fillText(a.labels[d], n + d * m + m / 2, p + c.scaleFontSize + 3), b.beginPath(), b.moveTo(n + (d + 1) * m, p + 3), b.lineWidth = c.scaleGridLineWidth, b.strokeStyle = c.scaleGridLineColor, b.lineTo(n + (d + 1) * m, 5), b.stroke(); b.lineWidth = c.scaleLineWidth; b.strokeStyle = c.scaleLineColor; b.beginPath(); b.moveTo(n, p + 5); b.lineTo(n, 5); b.stroke(); b.textAlign = "right"; b.textBaseline = "middle"; for (d = 0; d < j.steps; d++) b.beginPath(), b.moveTo(n - 3, p - (d + 1) *
            k), c.scaleShowGridLines ? (b.lineWidth = c.scaleGridLineWidth, b.strokeStyle = c.scaleGridLineColor, b.lineTo(n + r + 5, p - (d + 1) * k)) : b.lineTo(n - 0.5, p - (d + 1) * k), b.stroke(), c.scaleShowLabels && b.fillText(j.labels[d], n - 8, p - (d + 1) * k)
        }, function (d) {
            b.lineWidth = c.barStrokeWidth; for (var e = 0; e < a.datasets.length; e++) {
                b.fillStyle = a.datasets[e].fillColor; b.strokeStyle = a.datasets[e].strokeColor; for (var f = 0; f < a.datasets[e].data.length; f++) {
                    var g = n + c.barValueSpacing + m * f + s * e + c.barDatasetSpacing * e + c.barStrokeWidth * e; b.beginPath();
                    b.moveTo(g, p); b.lineTo(g, p - d * v(a.datasets[e].data[f], j, k) + c.barStrokeWidth / 2); b.lineTo(g + s, p - d * v(a.datasets[e].data[f], j, k) + c.barStrokeWidth / 2); b.lineTo(g + s, p); c.barShowStroke && b.stroke(); b.closePath(); b.fill()
                }
            }
        }, b)
    }, D = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (a) { window.setTimeout(a, 1E3 / 60) }, F = {}
};
define("chart", function(){});

define('modules/bindingHandlers',["durandal/composition","chart"],function(e){var t={init:function(){e.addBindingHandler("click-loading",{init:function(e,t,n,a){var i=n();$(e).click(function(t){t.preventDefault(),$(e).button("loading"),i["click-loading"].call(a).always(function(){$(e).button("reset")})})}}),e.addBindingHandler("pie-chart",{init:function(e,t){var n=e.getContext("2d"),a=t();new Chart(n).Pie(a)}}),e.addBindingHandler("validate",{update:function(e,t){var n=t();$(e).removeClass("has-success"),$(e).removeClass("has-error"),n.isModified()&&n.isValid()?$(e).addClass("has-success"):n.isModified()&&!n.isValid()&&$(e).addClass("has-error")}})}};return t});
define('modules/context',[],function(){var e={user:ko.observable(),sessionToken:ko.observable(),isAuthenticated:ko.observable(!1),clear:function(){this.user(null),this.sessionToken(null),this.isAuthenticated(!1)}};return e});
define('modules/data/dataService',['require'],function(e){var t=e("plugins/http"),n="http://localhost:9000/api/",a=[],i=function(e){$.each(a,function(){this(e)})};return{setErrorHandlers:function(e){a.push(e)},getTimeRecordSelected:function(e){return t.get(n+"TimeRecord",{id:e}).fail(i)},getTimeRecords:function(e){return t.get(n+"TimeRecord/GetAll",{count:e}).fail(i)},setTimeRecord:function(e){return t.post(n+"TimeRecord",e).fail(i)},getGroupedActivity:function(e,a,o){return t.get(n+"statistics",{groupType:e,year:a,filter:o}).fail(i)},setError:function(e){return t.post(n+"error",e)},authenticate:function(){return t.get(n+"authenticate")},getUser:function(){return t.get(n+"user")},createUser:function(e){return t.post(n+"user",e).fail(i)}}});
define('modules/errorHandler',['require'],function(e){var t=e("../modules/data/dataService"),n=e("../modules/notifications"),a={init:function(){window.onerror=function(e,n,a){return console.log("window.onerror sobreescrito!"),t.setError({Message:e,Url:n,Line:a}),!1},t.setErrorHandlers(function(e){var t="An error ocurred : "+e.statusText;if(e.responseText){var a=$.parseJSON(e.responseText);a.Message&&(t="Error "+a.Message)}console.log("ERRORR  obtenido.!"),console.log(e),n.show("danger",t,!0)})}};return a});
define('modules/geolocalizacion',['require'],function(e){var t=e("durandal/system"),n=function(){};return n.prototype.getLocation=function(){return t.defer(function(e){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){e.resolve(t)},function(t){switch(t.code){case t.PERMISSION_DENIED:e.reject("User denied the request for Geolocalization.");break;case t.POSITION_UNAVAILABLE:e.reject("Location information is unavailable");break;case t.TIMEOUT:e.reject("Error de timeout");break;case t.UNKNOWN_ERR:e.reject("Error desconocido en geolocalización")}})}).promise()},n});
define('modules/notifications',[],function(){var e=function(e,t,n){this.type=e,this.msg=t,this.lock=n},t={notificationsArr:ko.observableArray(),show:function(n,i,a){var o=new e(n,i,a);this.notificationsArr.push(o),a||setTimeout(function(){t.notificationsArr.remove(o)},5e3)},afterAdd:function(e){1===e.nodeType&&$(e).hide().slideDown()},beforeRemove:function(e){1===e.nodeType&&$(e).slideUp(function(){$(e).remove()})},deleteNotifications:function(){this.notificationsArr([])}};return t});
define('modules/validations',[],function(){return{init:function(){ko.validation.rules.confirmPasswordEqual={validator:function(e,t){return e===t.params()},message:"Password do not match."},ko.validation.registerExtenders(),ko.validation.init({insertMessages:!0})}}});
define('viewmodels/activity',['require'],function(e){var t=e("../modules/data/dataService");return{activity:ko.observable(),inicio:ko.observable(),fin:ko.observable(),duracion:ko.observable(),StartLocation:ko.observable(),EndLocation:ko.observable(),activate:function(e){console.log("ID Actividad a mostrar el detalle");var n=this;return t.getTimeRecordSelected(e).then(function(e){n.activity=e.Activity,n.inicio=moment.utc(e.Start).format("DD/MM/YYYY HH:mm:ss"),e.End&&(n.fin=moment.utc(e.End).format("DD/MM/YYYY HH:mm:ss")),n.duracion=e.DurationStr,n.StartLocation=e.StartLocalization,n.EndLocation=e.EndLocalization})}}});
define('viewmodels/estadisticas',['require'],function(e){var t=e("../modules/data/dataService"),n=e("../widgets/groupedActivity/groupedInfo"),i={groups:ko.observableArray(),activate:function(){var e=this,i=moment();return this.groups.removeAll(),$.when(t.getGroupedActivity(0,i.year(),i.isoWeek()),t.getGroupedActivity(1,i.year(),i.month()+1),t.getGroupedActivity(2,i.year(),0)).then(function(t,i,a){e.groups.push(new n(t[0],40,"Day","Hours","This Week")),e.groups.push(new n(i[0],160,"Week","Hours","This Month")),e.groups.push(new n(a[0],215,"Month","Days","This Year"))})}};return i});
define('plugins/http',["jquery","knockout"],function(e,t){return{callbackParam:"callback",toJSON:function(e){return t.toJSON(e)},get:function(n,i,a){return e.ajax(n,{data:i,headers:t.toJS(a)})},jsonp:function(n,i,a,o){return-1==n.indexOf("=?")&&(a=a||this.callbackParam,n+=-1==n.indexOf("?")?"?":"&",n+=a+"=?"),e.ajax({url:n,dataType:"jsonp",data:i,headers:t.toJS(o)})},put:function(n,i,a){return e.ajax({url:n,data:this.toJSON(i),type:"PUT",contentType:"application/json",dataType:"json",headers:t.toJS(a)})},post:function(n,i,a){return e.ajax({url:n,data:this.toJSON(i),type:"POST",contentType:"application/json",dataType:"json",headers:t.toJS(a)})},remove:function(n,i,a){return e.ajax({url:n,data:i,type:"DELETE",headers:t.toJS(a)})}}});
define('viewmodels/flickr',["plugins/http","durandal/app","knockout"],function(e,t,n){return{displayName:"Flickr",images:n.observableArray([]),activate:function(){if(!(this.images().length>0)){var t=this;return e.jsonp("http://api.flickr.com/services/feeds/photos_public.gne",{tags:"mount ranier",tagmode:"any",format:"json"},"jsoncallback").then(function(e){t.images(e.items)})}},select:function(e){e.viewUrl="views/detail",t.showDialog(e)},canDeactivate:function(){return t.showMessage("Are you sure you want to leave this page?","Navigate",["Yes","No"])}}});
define('viewmodels/home',['require'],function(e){var t,n,i=e("../modules/data/dataService"),a=e("durandal/app"),o=e("viewmodels/localizationDetail");return{timeRecords:ko.observableArray(),activity:ko.observable(),lastRecord:ko.observable(),canStartTracking:ko.observable(),activate:function(){var e=this;return t=a.on("timeRecord:changed:start").then(function(t){e.timeRecords.unshift(t)}),n=a.on("timeRecord:changed:end").then(function(t){var n=$.grep(e.timeRecords(),function(e){return e.Id===t.Id});1===n.length&&e.timeRecords.replace(n[0],t)}),i.getTimeRecords(10).then(function(t){if(e.timeRecords(t),e.timeRecords().length>0){var n=e.timeRecords()[0];e.lastRecord(n),e.canStartTracking(n.IsCompleted)}})},afterDeactivate:function(){t.off("timeRecord:changed:start"),n.off("timeRecord:changed:end")},showLocalizationDetail:function(e){o.show(e)}}});
define('viewmodels/ivalidRoute',[],function(){return{activate:function(e){return alert("La ruta: "+e+" no es correcta."),!0}}});
define('viewmodels/localizationDetail',['require'],function(e){var t=e("plugins/dialog"),n=function(e){this.timeRecord=ko.observable(e)};return n.prototype.close=function(){t.close(this)},n.show=function(e){return t.show(new n(e))},n});
define('viewmodels/login',['require'],function(e){var t=e("../modules/authentication"),n=e("../modules/notifications"),i=e("plugins/router"),a=e("viewmodels/signUp"),o=function(){this.username=ko.observable(),this.password=ko.observable(),this.rememberMe=ko.observable(),this.redirecURL=ko.observable(),this.activate=function(e){return this.redirecURL(e?e.redirect:""),!0}};return o.prototype.signUp=function(){a.show().then(function(e){e&&t.login(e.Username,e.Password,!1).then(function(){i.navigate("",!0)}).fail(function(){n.show("danger","Ops... Se ha producido un error al crear al nuevo usuario",!0),self.username(""),self.password(""),self.rememberMe("")})})},o.prototype.login=function(){var e=this;return t.login(this.username(),this.password(),this.rememberMe()).then(function(){n.deleteNotifications(),i.navigate(e.redirecURL(),!0)}).fail(function(){n.show("danger","Ops... The current username and password are not correct",!0),e.username(""),e.password(""),e.rememberMe("")})},o});
define('viewmodels/shell',['require'],function(e){var t=e("plugins/router"),n=e("durandal/app"),i=e("../modules/bindingHandlers"),a=e("../modules/errorHandler"),o=e("../modules/authentication"),r=e("../modules/context"),s=e("../modules/validations");return{router:t,context:r,authentication:o,search:function(){n.showMessage("Search not yet implemented...")},activate:function(){return t.map([{route:"",title:"Home",moduleId:"viewmodels/home",nav:!0},{route:"activity/:id",title:"Actividad",moduleId:"viewmodels/activity",nav:!1},{route:"estadisticas",title:"Estadísticas",moduleId:"viewmodels/estadisticas",nav:!0},{route:"login",title:"Login Time Tracking",moduleId:"viewmodels/login",nav:!1}]).mapUnknownRoutes("viewmodels/ivalidRoute","invalid").buildNavigationModel(),i.init(),a.init(),o.init(),s.init(),t.activate()}}});
define('viewmodels/signUp',['require'],function(e){var t=e("plugins/dialog"),n=e("../modules/data/dataService"),i=e("../modules/notifications"),a=function(){var e=this;this.model=ko.validatedObservable({name:ko.observable().extend({required:!0}),surname:ko.observable().extend({required:!0}),password:ko.observable().extend({required:!0,minLength:6}),username:ko.observable().extend({required:!0}),password2:ko.observable()}),this.model().password2.extend({required:!0,minLength:6,confirmPasswordEqual:{params:e.model().password}})};return a.prototype.submit=function(){var e=this;if(this.model.isValid()){var a={Name:this.model().name(),Surname:this.model().surname(),Username:this.model().username(),Password:this.model().password()};return n.createUser(a).then(function(){t.close(e,a),i.show("success","Usuario creado correctamente. Enhorabuena")})}return!1},a.prototype.close=function(){t.close(this)},a.show=function(){return t.show(new a)},a});
define('viewmodels/welcome',[],function(){var e=function(){this.displayName="Welcome to the Durandal Starter Kit!",this.description="Durandal is a cross-device, cross-platform client framework written in JavaScript and designed to make Single Page Applications (SPAs) easy to create and maintain.",this.features=["Clean MV* Architecture","JS & HTML Modularity","Simple App Lifecycle","Eventing, Modals, Message Boxes, etc.","Navigation & Screen State Management","Consistent Async Programming w/ Promises","App Bundling and Optimization","Use any Backend Technology","Built on top of jQuery, Knockout & RequireJS","Integrates with other libraries such as SammyJS & Bootstrap","Make jQuery & Bootstrap widgets templatable and bindable (or build your own widgets)."]};return e});
define('text',{load: function(id){throw new Error("Dynamic load not allowed: " + id);}});

define('text!views/activity.html',[],function () { return '    <article id="activityView" class="container">\n        <div class="col-xs-4" style="height: 300px">\n            <div data-bind="widget: { kind: \'map\', markers: [StartLocation, EndLocation]}"></div>\n        </div>\n        </div>\n        <div class="col-xs-8">\n            <table class="table table-condensed table-hover">\n                <tr>\n                    <td><label>Actividad</label></td>\n                    <td><span data-bind="text: activity"></span> </td>\n                </tr>\n                <tr>\n                    <td><label>Inicio</label></td>\n                    <td><span data-bind="text: inicio"></span> </td>\n                </tr>\n                <tr>\n                    <td><label>Fin</label></td>\n                    <td><span data-bind="text: fin"></span> </td>\n                </tr>\n                <tr>\n                    <td><label>Duración</label></td>\n                    <td><span data-bind="text: duracion"></span> </td>\n                </tr>\n            </table>\n        </div>\n    </article>';});


define('text!views/detail.html',[],function () { return '<div class="modal-content pictureDetail autoclose">\n    <div class="modal-header">\n        <h3>Details</h3>\n    </div>\n    <div class="modal-body">\n        <p data-bind="html: description"></p>\n    </div>\n</div>';});


define('text!views/estadisticas.html',[],function () { return '<div id="stadisticsView">\n    <article class="container" data-bind="foreach: groups">\n        <div data-bind="widget: {kind: \'groupedActivity\', info: $data }">\n        </div>\n    </article>\n</div>\n';});


define('text!views/flickr.html',[],function () { return '<section>\n    <h2 data-bind="text: displayName"></h2>\n    <div class="row" data-bind="foreach: images">\n        <div class="col-sm-6 col-md-3">\n            <a href="#" class="thumbnail" data-bind="click:$parent.select">\n                <img style="width: 260px; height: 180px;" data-bind="attr: { src: media.m }"/>\n            </a>\n        </div>\n    </div>\n</section>';});


define('text!views/home.html',[],function () { return '<!--<span data-bind="text: user.name() + \' \' + user.surname()"></span>\n<br>\n\n<span data-bind="text: user.fullname()"></span>-->\n\n<section>\n    <div data-bind="widget: { kind: \'quickStart\', lastRecord: lastRecord()}"></div>\n    <!--<div class="btn-group" data-bind="visible: canStartTracking()">\n        <div class="input-group">\n            <input type="text" class="form-control" data-bind="value: activity"/>\n            <span class="input-group-btn">\n                <button type="button" data-loading-text="Comenzando tarea..." class="btn btn-default" data-bind="\'click-loading\': startCommand">Start</button>\n            </span>\n        </div>\n    </div>\n    <div data-bind="visible: !canStartTracking()">\n        <div>\n            <h2 data-bind="text: moment.utc( lastRecord().Start ).format(\'HH:mm:ss\')" style="display: inline-block;"></h2>\n            <h3 data-bind="text: lastRecord().Activity"></h3>\n        </div>\n\n        <button class="btn" type="button"  data-loading-text="Finalizando tarea..." data-bind="\'click-loading\': endCommand">End</button>\n    </div>-->\n    <table class="table table-condensed table-hover">\n        <thead>\n            <tr>\n                <th>Duración</th>\n                <th>Actividad</th>\n                <th>Localización</th>\n                <th>Detalle</th>\n            </tr>\n        </thead>\n        <tbody data-bind="foreach: timeRecords">\n            <tr>\n                <td><span data-bind="text: IsCompleted ? DurationStr : \'In progress...\'"></span> </td>\n                <td><span data-bind="text: Activity"></span> </td>\n                <td>\n                    <a href="#" data-bind="click: $parent.showLocalizationDetail"> <i class="glyphicon glyphicon-map-marker home-icon" ></i> </a>\n                </td>\n                <td>\n                    <a href="#" data-bind="attr: {href:\'#activity/\' + Id}"> <i class="glyphicon glyphicon-info-sign home-icon"></i> </a>\n                </td>\n            </tr>\n        </tbody>\n\n    </table>\n</section>';});


define('text!views/ivalidRoute.html',[],function () { return '<!DOCTYPE html>\r\n<!--\r\nTo change this license header, choose License Headers in Project Properties.\r\nTo change this template file, choose Tools | Templates\r\nand open the template in the editor.\r\n-->\r\n<section>\r\n    <p>\r\n        No ha introducido una ruta correcta!!!\r\n    </p>\r\n</section>';});


define('text!views/localizationDetail.html',[],function () { return '<div class="messageBox" style="background-color: white;">\n    <div class="modal-body">\n        <div data-bind="widget: { kind: \'map\', markers: [timeRecord().StartLocalization, timeRecord().EndLocalization]}"></div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" data-bind="click: close">Close</button>\n    </div>\n</div>';});


define('text!views/login.html',[],function () { return '<section style="margin-top: 35px; margin-right: 101px;">\r\n<form class="form-horizontal" role="form">\r\n        <div class="form-group">\r\n            <label class="col-lg-2 control-label" for="inputUsername">Usuario</label>\r\n            <div class="col-lg-10">\r\n                <input type="text" class="form-control" id="inputUsername" data-bind="value: username"  placeholder="Introduce el nombre del usuario"/>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-lg-2 control-label" for="inputPassword">Contraseña</label>\r\n            <div class="col-lg-10">\r\n                <input type="password" data-bind="value: password" class="form-control" id="inputPassword" placeholder="Password"/>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class="form-group">\r\n            <div class="col-lg-offset-2 col-lg-10">\r\n                <div class="checkbox">\r\n                    <label>\r\n                        <input type="checkbox" data-bind="checked: rememberMe">\r\n                        Recordarme\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class="form-group">\r\n            <div class="col-lg-offset-2 col-lg-10">\r\n                <button type="submit" class="btn btn-default" data-bind="\'click-loading\': login">Entrar</button>\r\n                <button type="submit" class="btn btn-default" data-bind="click: signUp">Crear usuario</button>\r\n            </div>\r\n        </div>        \r\n    </form>\r\n</section>';});


define('text!views/notifications.html',[],function () { return '<section>\n    <div class="notification" data-bind="template:{\n     foreach: notificationsArr,\n     beforeRemove: beforeRemove,\n     afterAdd: afterAdd\n     }">\n        <div data-bind="css: \'alert alert-\' + type">\n            <button type="button"class="close" data-bind="click: $parent.notificationsArr.remove.bind($parent.notificationsArr)">X</button>\n            <span data-bind="text: msg"></span>\n        </div>\n    </div>\n</section>';});


define('text!views/shell.html',[],function () { return '<div>\n    <!-- ko if:context.isAuthenticated() == true -->\n    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">\n        <div class="navbar-header">\n            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\n                <span class="sr-only"></span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n            </button>\n            <a class="navbar-brand" href="#">\n                <i class="fa fa-home"></i>\n                <span>Time Tracking</span>\n            </a>\n        </div>\n\n        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\n            <ul class="nav navbar-nav" data-bind="foreach: router.navigationModel">\n                <li data-bind="css: { active: isActive }">\n                    <a data-bind="attr: { href: hash }, text: title"></a>\n                </li>\n            </ul>\n\n            <ul class="nav navbar-nav navbar-right" style="margin-right: 0">\n                <li class="loader" data-bind="css: { active: router.isNavigating }">\n                    <i class="fa fa-spinner fa-spin fa-2x"></i>\n                </li>\n                <li>\n                    <a href="#" data-bind="click: authentication.logOff">Log Off</a>\n                </li>\n            </ul>\n\n            <!--<form class="navbar-form navbar-right" role="search" data-bind="submit:search">\n                <div class="form-group">\n                    <input type="text" class="form-control" placeholder="Search">\n                </div>\n            </form>-->\n        </div>\n    </nav>\n    <!-- /ko -->\n    \n    <!-- data-bind="router: { transition:\'entrance\' }" -->\n    <div class="page-host">\n        <div id="notificationsView" data-bind="compose : {view:\'views/notifications.html\', model: \'modules/notifications\' }"></div>\n        <!-- ko router: {transition: \'entrance\', cacheViews:false} -->\n        <!-- /ko -->\n    </div>\n</div>';});


define('text!views/signUp.html',[],function () { return '<div class="messageBox" style="background-color: whitesmoke; min-width: 500px;">\r\n    <div class="modal-header">\r\n        <h3>Crea tu usuario</h3>\r\n    </div>\r\n    <form class="form-horizontal" id="signUp" role="form" data-bind="with: model">\r\n        <div class="modal-body">\r\n            <div class="form-group" data-bind="validate: name">\r\n                <label for="username" class="col-lg-2 control-label">Nombre</label>\r\n                <div class="col-lg-10">\r\n                    <input type="text" class="form-control" id="username" placeholder="Nombre del usuario" data-bind="value: name"/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" data-bind="validate: surname">\r\n                <label for="surname" class="col-lg-2 control-label">Apellidos</label>\r\n                <div class="col-lg-10">\r\n                    <input type="text" class="form-control" id="surname" placeholder="Apellidos del usuario" data-bind="value: surname"/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" data-bind="validate: username">\r\n                <label for="username" class="col-lg-2 control-label">Usuario</label>\r\n                <div class="col-lg-10">\r\n                    <input type="text" class="form-control" id="username" placeholder="Usuario" data-bind="value: username"/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" data-bind="validate: password">\r\n                <label for="password" class="col-lg-2 control-label">Password</label>\r\n                <div class="col-lg-10">\r\n                    <input type="password" class="form-control" id="password" data-bind="value: password"/>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" data-bind="validate: password2">\r\n                <label for="password2" class="col-lg-2 control-label">Repite password</label>\r\n                <div class="col-lg-10">\r\n                    <input type="password" class="form-control" id="password2" data-bind="value: password2"/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n            <button type="submit" class="btn btn-default" data-loading-text="Creando usuario..." data-bind="\'click-loading\': $parent.submit.bind($parent), css: {disabled: !isValid()}" >Nuevo</button>\r\n            <button type=\'submit\' class="btn btn-primary" data-bind="click:$parent.close.bind($parent)">Cerrar</button>                \r\n        </div>\r\n    </form>\r\n</div>\r\n    ';});


define('text!views/welcome.html',[],function () { return '<section>\n    <h2 data-bind="text:displayName"></h2>\n    <blockquote data-bind="text:description"></blockquote>\n    <h3>Features</h3>\n    <ul data-bind="foreach: features">\n        <li data-bind="text:$data"></li>\n    </ul>\n    <div class="alert alert-success">\n      <h4>Read Me Please</h4>\n        For information about this template and for general documenation please visit <a href="http://www.durandaljs.com">the official site</a> and if you can\'t find \n        answers to your questions there, we hope you will join our <a href="https://groups.google.com/forum/?fromgroups#!forum/durandaljs">google group</a>.\n    </div>\n</section>';});

define('widgets/groupedActivity/groupedInfo',[],function(){function e(e,t){return[{value:t-e,color:"#E0E4CC"},{value:e,color:"#69D2E7"}]}function t(e){var t=0;return $.each(e,function(){t+=this.Duration}),Math.floor(100*t)/100}var n=function(n,i,a,o,r){this.records=ko.observableArray(n),this.sum=ko.observable(t(n)),this.total=ko.observable(i),this.chartData=ko.observable(e(this.sum(),i)),this.columntitle=ko.observable(a),this.unit=ko.observable(o),this.groupTitle=ko.observable(r)};return n.prototype.translateRelativeId=function(e,t){return 0==t?moment().weekday(e).format("dddd"):2==t?moment().months(e-1).format("MMMM"):"Week: "+e},n});

define('text!widgets/groupedActivity/view.html',[],function () { return '<div data-bind="with: info">\r\n    <h2 data-bind="text: groupTitle" style="border-bottom: solid 1px rgb(204, 204, 204);"></h2>\r\n    <div class="row">\r\n        <div class="col-xs-12 col-sm-6 col-md-8">\r\n            <div data-bind="visible: records().length == 0">\r\n                <div class="alert">\r\n                    No information available.\r\n                </div>\r\n            </div>\r\n            <div data-bind="visible: records().length > 0">\r\n\r\n                <table class="table table-condensed">\r\n                    <thead>\r\n                        <tr>\r\n                            <th data-bind="text: $parent.title"></th>\r\n                            <th data-bind="text: $parent.unit"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody data-bind="foreach: records">\r\n                        <tr>\r\n                            <td class="col-xs-6 col-sm-6 col-md-4"><span data-bind="text: $parent.translateRelativeId(RelativeId, Group)"></span></td>\r\n                            <td class="col-xs-6 col-sm-6 col-md-4"><span data-bind="text: Duration "></span></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n        <div class="col-xs-6 col-sm-6 col-md-4">\r\n            <canvas data-bind="\'pie-chart\': chartData()"></canvas>\r\n            <p style="text-align: center">\r\n                <span>Worked <strong data-bind="text: sum() + \' \' + unit()"></strong> of <strong data-bind="text: total() + \' \' + unit()"></strong></span>\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});

define('widgets/groupedActivity/viewmodel',[],function(){var e=function(){};return e.prototype.activate=function(e){this.info=e.info},e});

define('text!widgets/map/view.html',[],function () { return '<div class="img-thumbnail map" style="width: 450px">\n    <div data-bind="visible: !mapsAvailable()">\n        <div class="alert">\n            Localization is unavailable\n        </div>\n    </div>\n    <div data-bind="visible: mapsAvailable" style="width: 100%; height: 300px;">\n        <div id="googleMap" style="width: 100%; height: 100%; position: fixed"></div>\n    </div>\n</div>\n\n';});

define('widgets/map/viewmodel',[],function(){var e=function(){this.mapsAvailable=ko.observable(),this.markers=[],this.map=null};return e.prototype.activate=function(e){this.settings=e;var t=this;"undefined"==typeof google?this.mapsAvailable(!1):(this.mapsAvailable(!0),$.each(e.markers,function(e,n){n&&t.markers.push(new google.maps.Marker({position:new google.maps.LatLng(n.Latitude||0,n.Longitude||0),draggable:!1,visible:!0}))}),0===this.markers.length&&this.mapsAvailable(!1))},e.prototype.detached=function(){$.each(this.markers,function(){this.setMap(null)})},e.prototype.attached=function(e){var t=this;this.mapsAvailable()&&($("#googleMap",e).html(""),this.map=new google.maps.Map($("#googleMap",e)[0],{zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP}),$.each(this.markers,function(){this.setMap(t.map)}),this.markers.length>0&&this.map.setCenter(this.markers[0].position),google.maps.event.trigger(this.map,"resize"))},e});

define('text!widgets/quickStart/view.html',[],function () { return '<div id="mainChronometer" class="row actionRegion">\n    <div class="container">\n        <div >\n<!--        </div>\n        <div class="col-xs-12 col-md-9"> -->\n            <form class="input-group" style="margin-top: 19px;">\n                <input type="text" style="width: 10%;" class="form-control" data-bind="value: timeElapsed(), visible: !canStartTracking()" disabled="disabled"/>\n                <input type="text" class="form-control" data-bind="value: activity, disable: !canStartTracking(), style:{width: (!canStartTracking() ? \'90%\' : \'100%\')}, hasfocus: canStartTracking()"/>\n                <span class="input-group-btn">\n                    <button type="submit" data-loading-text="Comenzando tarea..." class="btn btn-default" data-bind="\'click-loading\': startCommand, visible: canStartTracking()">Start</button>\n                    <button type="submit" data-loading-text="Finalizando tarea..." class="btn btn-default" data-bind="\'click-loading\': endCommand, visible: !canStartTracking()">finalizar</button>\n                </span>\n            </form>\n        </div>\n        <br/>\n    </div>\n</div>';});

define('widgets/quickStart/viewmodel',['require'],function(e){function t(e){return e.TimeZoneOffset=(new Date).getTimezoneOffset(),c.setTimeRecord(e)}function n(){return r.defer(function(e){o.getLocation().then(function(t){var n={Latitude:t.coords.latitude,Longitude:t.coords.longitude,HorizontalAccuracy:t.coords.accuracy};e.resolve(n)}).fail(function(t){l.show("warning","Could not see the location "+t),e.reject(null)})})}var i,a=e("../../modules/geolocalizacion"),o=new a,r=e("durandal/system"),s=e("durandal/app"),l=e("../../modules/notifications"),c=e("../../modules/data/dataService"),u=function(){this.timeElapsed=ko.observable(),this.duration=ko.observable(),this.canStartTracking=ko.observable(),this.activity=ko.observable(),this.lastRecord=ko.observable()};return u.prototype.activate=function(e){e.lastRecord&&!e.lastRecord.IsCompleted?(this.lastRecord(e.lastRecord),this.timeElapsed(this.lastRecord().DurationStr),this.canStartTracking(!1),this.setElapsedTimer(),this.activity(this.lastRecord().Activity)):this.initialize()},u.prototype.detached=function(){clearInterval(i)},u.prototype.initialize=function(){this.canStartTracking(!0),this.lastRecord({IsCompleted:ko.observable(!1),Duration:ko.observable(0),Activity:ko.observable("")}),this.activity(""),clearInterval(i),this.timeElapsed("00:00:00")},u.prototype.startCommand=function(){var e={IsCompleted:!1,Activity:this.activity()},i=this;return this.activity()?n().then(function(n){return e.StartLocalization=n,i.canStartTracking(!1),i.lastRecord(e),t(e).then(function(e){i.lastRecord(e),i.canStartTracking(!1),s.trigger("timeRecord:changed:start",e),i.setElapsedTimer(),l.show("success","La actividad "+e.Activity+" se ha iniciado correctamente.")})}):(s.showMessage("Debe insertar el nombre de la actividad."),$.Deferred().reject())},u.prototype.endCommand=function(){var e=this;return n().then(function(n){return e.lastRecord.EndLocalization=n,t(e.lastRecord).then(function(t){e.lastRecord(t),s.trigger("timeRecord:changed:end",t),e.canStartTracking(!0),e.activity(""),clearInterval(i),l.show("success","La actividad "+t.Activity+" se ha finalizado correctamente.")})})},u.prototype.setElapsedTimer=function(){var e=this,t=moment(this.lastRecord().StartUtc,"YYYY-MM-DD HH:mm:ss"),n=function(e){return("0"+e).slice(-2)};this.duration(this.lastRecord().Duration),this.duration.subscribe(function(i){var a=moment(t).add("s",i).diff(t),o=moment.duration(a);e.timeElapsed(n(o.hours())+":"+n(o.minutes())+":"+n(o.seconds()))}),clearInterval(i),i=setInterval(function(){e.duration(e.duration()+1)},1e3)},u});
define('plugins/dialog',["durandal/system","durandal/app","durandal/composition","durandal/activator","durandal/viewEngine","jquery","knockout"],function(e,t,n,i,a,o,r){function s(t){return e.defer(function(n){e.isString(t)?e.acquire(t).then(function(t){n.resolve(e.resolveObject(t))}).fail(function(n){e.error("Failed to load dialog module ("+t+"). Details: "+n.message)}):n.resolve(t)}).promise()}var l,c={},u=r.observable(0),d=function(e,t,n,i,a){this.message=e,this.title=t||d.defaultTitle,this.options=n||d.defaultOptions,this.autoclose=i||!1,this.settings=o.extend({},d.defaultSettings,a)};return d.prototype.selectOption=function(e){l.close(this,e)},d.prototype.getView=function(){return a.processMarkup(d.defaultViewMarkup)},d.setViewUrl=function(e){delete d.prototype.getView,d.prototype.viewUrl=e},d.defaultTitle=t.title||"Application",d.defaultOptions=["Ok"],d.defaultSettings={buttonClass:"btn btn-default",primaryButtonClass:"btn-primary autofocus",secondaryButtonClass:"","class":"modal-content messageBox",style:null},d.setDefaults=function(e){o.extend(d.defaultSettings,e)},d.prototype.getButtonClass=function(e){var t="";return this.settings&&(this.settings.buttonClass&&(t=this.settings.buttonClass),0===e()&&this.settings.primaryButtonClass&&(t.length>0&&(t+=" "),t+=this.settings.primaryButtonClass),e()>0&&this.settings.secondaryButtonClass&&(t.length>0&&(t+=" "),t+=this.settings.secondaryButtonClass)),t},d.prototype.getClass=function(){return this.settings?this.settings["class"]:"messageBox"},d.prototype.getStyle=function(){return this.settings?this.settings.style:null},d.prototype.getButtonText=function(t){var n=o.type(t);return"string"===n?t:"object"===n?"string"===o.type(t.text)?t.text:(e.error("The object for a MessageBox button does not have a text property that is a string."),null):(e.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},d.prototype.getButtonValue=function(t){var n=o.type(t);return"string"===n?t:"object"===n?"undefined"===o.type(t.text)?(e.error("The object for a MessageBox button does not have a value property defined."),null):t.value:(e.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},d.defaultViewMarkup=['<div data-view="plugins/messageBox" data-bind="css: getClass(), style: getStyle()">','<div class="modal-header">','<h3 data-bind="html: title"></h3>',"</div>",'<div class="modal-body">','<p class="message" data-bind="html: message"></p>',"</div>",'<div class="modal-footer">',"<!-- ko foreach: options -->",'<button data-bind="click: function () { $parent.selectOption($parent.getButtonValue($data)); }, text: $parent.getButtonText($data), css: $parent.getButtonClass($index)"></button>',"<!-- /ko -->",'<div style="clear:both;"></div>',"</div>","</div>"].join("\n"),l={MessageBox:d,currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isOpen:r.computed(function(){return u()>0}),getContext:function(e){return c[e||"default"]},addContext:function(e,t){t.name=e,c[e]=t;var n="show"+e.substr(0,1).toUpperCase()+e.substr(1);this[n]=function(t,n){return this.show(t,n,e)}},createCompositionSettings:function(e,t){var n={model:e,activate:!1,transition:!1};return t.binding&&(n.binding=t.binding),t.attached&&(n.attached=t.attached),t.compositionComplete&&(n.compositionComplete=t.compositionComplete),n},getDialog:function(e){return e?e.__dialog__:void 0},close:function(e){var t=this.getDialog(e);if(t){var n=Array.prototype.slice.call(arguments,1);t.close.apply(t,n)}},show:function(t,a,o){var r=this,l=c[o||"default"];return e.defer(function(e){s(t).then(function(t){var o=i.create();o.activateItem(t,a).then(function(i){if(i){var a=t.__dialog__={owner:t,context:l,activator:o,close:function(){var n=arguments;o.deactivateItem(t,!0).then(function(i){i&&(u(u()-1),l.removeHost(a),delete t.__dialog__,0===n.length?e.resolve():1===n.length?e.resolve(n[0]):e.resolve.apply(e,n))})}};a.settings=r.createCompositionSettings(t,l),l.addHost(a),u(u()+1),n.compose(a.host,a.settings)}else e.resolve(!1)})})}).promise()},showMessage:function(t,n,i,a,o){return e.isString(this.MessageBox)?l.show(this.MessageBox,[t,n||d.defaultTitle,i||d.defaultOptions,a||!1,o||{}]):l.show(new this.MessageBox(t,n,i,a,o))},install:function(e){t.showDialog=function(e,t,n){return l.show(e,t,n)},t.closeDialog=function(){return l.close.apply(l,arguments)},t.showMessage=function(e,t,n,i,a){return l.showMessage(e,t,n,i,a)},e.messageBox&&(l.MessageBox=e.messageBox),e.messageBoxView&&(l.MessageBox.prototype.getView=function(){return a.processMarkup(e.messageBoxView)}),e.messageBoxViewUrl&&l.MessageBox.setViewUrl(e.messageBoxViewUrl)}},l.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(e){var t=o("body"),n=o('<div class="modalBlockout"></div>').css({"z-index":l.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),i=o('<div class="modalHost"></div>').css({"z-index":l.getNextZIndex()}).appendTo(t);if(e.host=i.get(0),e.blockout=n.get(0),!l.isOpen()){e.oldBodyMarginRight=t.css("margin-right"),e.oldInlineMarginRight=t.get(0).style.marginRight;var a=o("html"),r=t.outerWidth(!0),s=a.scrollTop();o("html").css("overflow-y","hidden");var c=o("body").outerWidth(!0);t.css("margin-right",c-r+parseInt(e.oldBodyMarginRight,10)+"px"),a.scrollTop(s)}},removeHost:function(e){if(o(e.host).css("opacity",0),o(e.blockout).css("opacity",0),setTimeout(function(){r.removeNode(e.host),r.removeNode(e.blockout)},this.removeDelay),!l.isOpen()){var t=o("html"),n=t.scrollTop();t.css("overflow-y","").scrollTop(n),e.oldInlineMarginRight?o("body").css("margin-right",e.oldBodyMarginRight):o("body").css("margin-right","")}},attached:function(e){o(e).css("visibility","hidden")},compositionComplete:function(e,t,n){var i=l.getDialog(n.model),a=o(e),r=a.find("img").filter(function(){var e=o(this);return!(this.style.width&&this.style.height||e.attr("width")&&e.attr("height"))});a.data("predefinedWidth",a.get(0).style.width);var s=function(e,t){setTimeout(function(){var n=o(e);t.context.reposition(e),o(t.host).css("opacity",1),n.css("visibility","visible"),n.find(".autofocus").first().focus()},1)};s(e,i),r.load(function(){s(e,i)}),(a.hasClass("autoclose")||n.model.autoclose)&&o(i.blockout).click(function(){i.close()})},reposition:function(e){var t=o(e),n=o(window);t.data("predefinedWidth")||t.css({width:""});var i=t.outerWidth(!1),a=t.outerHeight(!1),r=n.height()-10,s=n.width()-10,l=Math.min(a,r),c=Math.min(i,s);t.css({"margin-top":(-l/2).toString()+"px","margin-left":(-c/2).toString()+"px"}),a>r?t.css("overflow-y","auto").outerHeight(r):t.css({"overflow-y":"",height:""}),i>s?t.css("overflow-x","auto").outerWidth(s):(t.css("overflow-x",""),t.data("predefinedWidth")?t.css("width",t.data("predefinedWidth")):t.outerWidth(c))}}),l});
define('plugins/history',["durandal/system","jquery"],function(e,t){function n(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");s.history.replaceState?s.history.replaceState({},document.title,i+"#"+t):e.replace(i+"#"+t)}else e.hash="#"+t}var i=/^[#\/]|\s+$/g,a=/^\/+|\/+$/g,o=/msie [\w.]+/,r=/\/$/,s={interval:50,active:!1};return"undefined"!=typeof window&&(s.location=window.location,s.history=window.history),s.getHash=function(e){var t=(e||s).location.href.match(/#(.*)$/);return t?t[1]:""},s.getFragment=function(e,t){if(null==e)if(s._hasPushState||!s._wantsHashChange||t){e=s.location.pathname+s.location.search;var n=s.root.replace(r,"");e.indexOf(n)||(e=e.substr(n.length))}else e=s.getHash();return e.replace(i,"")},s.activate=function(n){s.active&&e.error("History has already been activated."),s.active=!0,s.options=e.extend({},{root:"/"},s.options,n),s.root=s.options.root,s._wantsHashChange=s.options.hashChange!==!1,s._wantsPushState=!!s.options.pushState,s._hasPushState=!!(s.options.pushState&&s.history&&s.history.pushState);var r=s.getFragment(),l=document.documentMode,c=o.exec(navigator.userAgent.toLowerCase())&&(!l||7>=l);s.root=("/"+s.root+"/").replace(a,"/"),c&&s._wantsHashChange&&(s.iframe=t('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,s.navigate(r,!1)),s._hasPushState?t(window).on("popstate",s.checkUrl):s._wantsHashChange&&"onhashchange"in window&&!c?t(window).on("hashchange",s.checkUrl):s._wantsHashChange&&(s._checkUrlInterval=setInterval(s.checkUrl,s.interval)),s.fragment=r;var u=s.location,d=u.pathname.replace(/[^\/]$/,"$&/")===s.root;if(s._wantsHashChange&&s._wantsPushState){if(!s._hasPushState&&!d)return s.fragment=s.getFragment(null,!0),s.location.replace(s.root+s.location.search+"#"+s.fragment),!0;s._hasPushState&&d&&u.hash&&(this.fragment=s.getHash().replace(i,""),this.history.replaceState({},document.title,s.root+s.fragment+u.search))}return s.options.silent?void 0:s.loadUrl(n.startRoute)},s.deactivate=function(){t(window).off("popstate",s.checkUrl).off("hashchange",s.checkUrl),clearInterval(s._checkUrlInterval),s.active=!1},s.checkUrl=function(){var e=s.getFragment();return e===s.fragment&&s.iframe&&(e=s.getFragment(s.getHash(s.iframe))),e===s.fragment?!1:(s.iframe&&s.navigate(e,!1),s.loadUrl(),void 0)},s.loadUrl=function(e){var t=s.fragment=s.getFragment(e);return s.options.routeHandler?s.options.routeHandler(t):!1},s.navigate=function(t,i){if(!s.active)return!1;if(void 0===i?i={trigger:!0}:e.isBoolean(i)&&(i={trigger:i}),t=s.getFragment(t||""),s.fragment!==t){s.fragment=t;var a=s.root+t;if(""===t&&"/"!==a&&(a=a.slice(0,-1)),s._hasPushState)s.history[i.replace?"replaceState":"pushState"]({},document.title,a);else{if(!s._wantsHashChange)return s.location.assign(a);n(s.location,t,i.replace),s.iframe&&t!==s.getFragment(s.getHash(s.iframe))&&(i.replace||s.iframe.document.open().close(),n(s.iframe.location,t,i.replace))}return i.trigger?s.loadUrl(t):void 0}},s.navigateBack=function(){s.history.back()},s});
define('plugins/observable',["durandal/system","durandal/binder","knockout"],function(e,t,n){function i(e){var t=e[0];return"_"===t||"$"===t||x&&e===x}function a(t){return!(!t||void 0===t.nodeType||!e.isNumber(t.nodeType))}function o(e){if(!e||a(e)||e.ko===n||e.jquery)return!1;var t=h.call(e);return-1==p.indexOf(t)&&!(e===!0||e===!1)}function r(e){var t={};return Object.defineProperty(e,"__observable__",{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function s(e,t,n){var i=e.__observable__,a=!0;if(!i||!i.__full__){i=i||r(e),i.__full__=!0,y.forEach(function(n){t[n]=function(){return w[n].apply(e,arguments)}}),g.forEach(function(n){e[n]=function(){a=!1;var e=S[n].apply(t,arguments);return a=!0,e}}),m.forEach(function(n){e[n]=function(){a&&t.valueWillMutate();var i=w[n].apply(e,arguments);return a&&t.valueHasMutated(),i}}),b.forEach(function(i){e[i]=function(){for(var o=0,r=arguments.length;r>o;o++)l(arguments[o],n);a&&t.valueWillMutate();var s=w[i].apply(e,arguments);return a&&t.valueHasMutated(),s}}),e.splice=function(){for(var i=2,o=arguments.length;o>i;i++)l(arguments[i],n);a&&t.valueWillMutate();var r=w.splice.apply(e,arguments);return a&&t.valueHasMutated(),r};for(var o=0,s=e.length;s>o;o++)l(e[o],n)}}function l(t,i){var a,l;if(x&&t&&t[x]&&(i=i?i.slice(0):[],i.push(t[x])),o(t)&&(a=t.__observable__,!a||!a.__full__)){if(a=a||r(t),a.__full__=!0,e.isArray(t)){var c=n.observableArray(t);s(t,c,i)}else for(var f in t)if(!v(f)&&!a[f]){var h=Object.getPropertyDescriptor(t,f);h&&(h.get||h.set)?d(t,f,{get:h.get,set:h.set}):(l=t[f],e.isFunction(l)||u(t,f,l,i))}k&&e.log("Converted",t)}}function c(e,t,n){n?t?t.destroyAll||s(t,e):(t=[],s(t,e)):l(t),e(t)}function u(t,i,a,o){var u,d,f=t.__observable__||r(t);if(void 0===a&&(a=t[i]),e.isArray(a))u=n.observableArray(a),s(a,u,o),d=!0;else if("function"==typeof a){if(!n.isObservable(a))return null;u=a}else!A&&e.isPromise(a)?(u=n.observable(),a.then(function(t){if(e.isArray(t)){var i=n.observableArray(t);s(t,i,o),t=i}u(t)})):(u=n.observable(a),l(a,o));return o&&o.length>0&&o.forEach(function(n){e.isArray(a)?u.subscribe(function(e){n(t,i,null,e)},null,"arrayChange"):u.subscribe(function(e){n(t,i,e,null)})}),Object.defineProperty(t,i,{configurable:!0,enumerable:!0,get:u,set:n.isWriteableObservable(u)?function(t){t&&e.isPromise(t)&&!A?t.then(function(t){c(u,t,e.isArray(t))}):c(u,t,d)}:void 0}),f[i]=u,u}function d(t,i,a){var o,r={owner:t,deferEvaluation:!0};return"function"==typeof a?r.read=a:("value"in a&&e.error('For defineProperty, you must not specify a "value" for the property. You must provide a "get" function.'),"function"!=typeof a.get&&"function"!=typeof a.read&&e.error('For defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".'),r.read=a.get||a.read,r.write=a.set||a.write),o=n.computed(r),t[i]=o,u(t,i,o)}var f,v,h=Object.prototype.toString,p=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],g=["remove","removeAll","destroy","destroyAll","replace"],m=["pop","reverse","sort","shift","slice"],b=["push","unshift"],y=["filter","map","reduce","reduceRight","forEach","every","some"],w=Array.prototype,S=n.observableArray.fn,k=!1,x=void 0,A=!1;if(!("getPropertyDescriptor"in Object)){var I=Object.getOwnPropertyDescriptor,M=Object.getPrototypeOf;Object.getPropertyDescriptor=function(e,t){for(var n,i=e;i&&!(n=I(i,t));)i=M(i);return n}}return f=function(e,t){var i,a,o;return e?(i=e.__observable__,i&&(a=i[t])?a:(o=e[t],n.isObservable(o)?o:u(e,t,o))):null},f.defineProperty=d,f.convertProperty=u,f.convertObject=l,f.install=function(e){var n=t.binding;t.binding=function(e,t,i){i.applyBindings&&!i.skipConversion&&l(e),n(e,t)},k=e.logConversion,e.changeDetection&&(x=e.changeDetection),A=e.skipPromises,v=e.shouldIgnorePropertyName||i},f});
define('plugins/router',["durandal/system","durandal/app","durandal/activator","durandal/events","durandal/composition","plugins/history","knockout","jquery"],function(e,t,n,i,a,o,r,s){function l(e){return e=e.replace(b,"\\$&").replace(g,"(?:$1)?").replace(p,function(e,t){return t?e:"([^/]+)"}).replace(m,"(.*?)"),new RegExp("^"+e+"$",w?void 0:"i")}function c(e){var t=e.indexOf(":"),n=t>0?t-1:e.length;return e.substring(0,n)}function u(e,t){return-1!==e.indexOf(t,e.length-t.length)}function d(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0,i=e.length;i>n;n++)if(e[n]!=t[n])return!1;return!0}function f(e){return e.queryString?e.fragment+"?"+e.queryString:e.fragment}var v,h,g=/\((.*?)\)/g,p=/(\(\?)?:\w+/g,m=/\*\w+/g,b=/[\-{}\[\]+?.,\\\^$|#\s]/g,y=/\/$/,w=!1,S="/",k="/",x=function(){function a(e,t){return e.router&&e.router.parent==t}function s(e){_&&_.config.isActive&&_.config.isActive(e)}function g(t,n,i){e.log("Navigation Complete",t,n);var o=e.getModuleId(E);o&&N.trigger("router:navigation:from:"+o),E=t,s(!1),_=n,s(!0);var r=e.getModuleId(E);switch(r&&N.trigger("router:navigation:to:"+r),a(t,N)||N.updateDocumentTitle(t,n),i){case"rootRouter":S=f(_);break;case"rootRouterWithChild":k=f(_);break;case"lastChildRouter":S=k}h.explicitNavigation=!1,h.navigatingBack=!1,N.trigger("router:navigation:complete",t,n,N)}function m(t,n){e.log("Navigation Cancelled"),N.activeInstruction(_),N.navigate(S,!1),V(!1),h.explicitNavigation=!1,h.navigatingBack=!1,N.trigger("router:navigation:cancelled",t,n,N)}function b(t){e.log("Navigation Redirecting"),V(!1),h.explicitNavigation=!1,h.navigatingBack=!1,N.navigate(t,{trigger:!0,replace:!0})}function w(t,n,i){h.navigatingBack=!h.explicitNavigation&&E!=i.fragment,N.trigger("router:route:activating",n,i,N);var o={canDeactivate:!N.parent};t.activateItem(n,i.params,o).then(function(e){if(e){var o=E,r=a(n,N),s="";if(N.parent?r||(s="lastChildRouter"):s=r?"rootRouterWithChild":"rootRouter",g(n,i,s),r){n.router.trigger("router:route:before-child-routes",n,i,N);var l=i.fragment;i.queryString&&(l+="?"+i.queryString),n.router.loadUrl(l)}o==n&&(N.attached(),N.compositionComplete())}else t.settings.lifecycleData&&t.settings.lifecycleData.redirect?b(t.settings.lifecycleData.redirect):m(n,i);v&&(v.resolve(),v=null)}).fail(function(t){e.error(t)})}function A(t,n,i){var a=N.guardRoute(n,i);a||""===a?a.then?a.then(function(a){a?e.isString(a)?b(a):w(t,n,i):m(n,i)}):e.isString(a)?b(a):w(t,n,i):m(n,i)}function I(e,t,n){N.guardRoute?A(e,t,n):w(e,t,n)}function T(e){return _&&_.config.moduleId==e.config.moduleId&&E&&(E.canReuseForRoute&&E.canReuseForRoute.apply(E,e.params)||!E.canReuseForRoute&&E.router&&E.router.loadUrl)}function R(){if(!V()){var t=B.shift();if(B=[],t)if(V(!0),N.activeInstruction(t),N.trigger("router:navigation:processing",t,N),T(t)){var i=n.create();i.forceActiveItem(E),i.settings.areSameItem=L.settings.areSameItem,i.settings.findChildActivator=L.settings.findChildActivator,I(i,E,t)}else t.config.moduleId?e.acquire(t.config.moduleId).then(function(n){var i=e.resolveObject(n);t.config.viewUrl&&(i.viewUrl=t.config.viewUrl),I(L,i,t)}).fail(function(n){e.error("Failed to load routed module ("+t.config.moduleId+"). Details: "+n.message,n)}):I(L,{viewUrl:t.config.viewUrl,canReuseForRoute:function(){return!0}},t)}}function M(e){B.unshift(e),R()}function C(e,t,n){for(var i=e.exec(t).slice(1),a=0;a<i.length;a++){var o=i[a];i[a]=o?decodeURIComponent(o):null}var r=N.parseQueryString(n);return r&&i.push(r),{params:i,queryParams:r}}function D(t){N.trigger("router:route:before-config",t,N),e.isRegExp(t.route)?t.routePattern=t.route:(t.title=t.title||N.convertRouteToTitle(t.route),t.viewUrl||(t.moduleId=t.moduleId||N.convertRouteToModuleId(t.route)),t.hash=t.hash||N.convertRouteToHash(t.route),t.hasChildRoutes&&(t.route=t.route+"*childRoutes"),t.routePattern=l(t.route)),t.isActive=t.isActive||r.observable(!1),N.trigger("router:route:after-config",t,N),N.routes.push(t),N.route(t.routePattern,function(e,n){var i=C(t.routePattern,e,n);M({fragment:e,queryString:n,config:t,params:i.params,queryParams:i.queryParams})})}function O(t){if(e.isArray(t.route))for(var n=t.isActive||r.observable(!1),i=0,a=t.route.length;a>i;i++){var o=e.extend({},t);o.route=t.route[i],o.isActive=n,i>0&&delete o.nav,D(o)}else D(t);return N}function P(e){var n=r.unwrap(t.title);document.title=n?e+" | "+n:e}var E,_,B=[],V=r.observable(!1),L=n.create(),N={handlers:[],routes:[],navigationModel:r.observableArray([]),activeItem:L,isNavigating:r.computed(function(){var e=L(),t=V(),n=e&&e.router&&e.router!=N&&e.router.isNavigating()?!0:!1;return t||n}),activeInstruction:r.observable(null),__router__:!0};i.includeIn(N),L.settings.areSameItem=function(e,t,n,i){return e==t?d(n,i):!1},L.settings.findChildActivator=function(e){return e&&e.router&&e.router.parent==N?e.router.activeItem:null},N.parseQueryString=function(t){var n,i;if(!t)return null;if(i=t.split("&"),0==i.length)return null;n={};for(var a=0;a<i.length;a++){var o=i[a];if(""!==o){var r=o.split(/=(.+)?/),s=r[0],l=r[1]&&decodeURIComponent(r[1].replace(/\+/g," ")),c=n[s];c?e.isArray(c)?c.push(l):n[s]=[c,l]:n[s]=l}}return n},N.route=function(e,t){N.handlers.push({routePattern:e,callback:t})},N.loadUrl=function(t){var n=N.handlers,i=null,a=t,r=t.indexOf("?");if(-1!=r&&(a=t.substring(0,r),i=t.substr(r+1)),N.relativeToParentRouter){var s=this.parent.activeInstruction();a=-1==r?s.params.join("/"):s.params.slice(0,-1).join("/"),a&&"/"==a.charAt(0)&&(a=a.substr(1)),a||(a=""),a=a.replace("//","/").replace("//","/")}a=a.replace(y,"");for(var l=0;l<n.length;l++){var c=n[l];if(c.routePattern.test(a))return c.callback(a,i),!0}return e.log("Route Not Found",t,_),N.trigger("router:route:not-found",t,N),N.parent&&(S=k),o.navigate(S,{trigger:!1,replace:!0}),h.explicitNavigation=!1,h.navigatingBack=!1,!1};var j;return r.isObservable(t.title)&&t.title.subscribe(function(){var e=N.activeInstruction(),t=null!=e?r.unwrap(e.config.title):"";P(t)}),N.updateDocumentTitle=function(e,n){var i=r.unwrap(t.title),a=n.config.title;j&&j.dispose(),a?r.isObservable(a)?(j=a.subscribe(P),P(a())):P(a):i&&(document.title=i)},N.navigate=function(t,n){return t&&-1!=t.indexOf("://")?(window.location.href=t,!0):((void 0===n||e.isBoolean(n)&&n||e.isObject(n)&&n.trigger)&&(h.explicitNavigation=!0),(e.isBoolean(n)&&!n||n&&void 0!=n.trigger&&!n.trigger)&&(S=t),o.navigate(t,n))},N.navigateBack=function(){o.navigateBack()},N.attached=function(){N.trigger("router:navigation:attached",E,_,N)},N.compositionComplete=function(){V(!1),N.trigger("router:navigation:composition-complete",E,_,N),R()},N.convertRouteToHash=function(e){if(e=e.replace(/\*.*$/,""),N.relativeToParentRouter){var t=N.parent.activeInstruction(),n=e?t.config.hash+"/"+e:t.config.hash;return o._hasPushState&&(n="/"+n),n=n.replace("//","/").replace("//","/")}return o._hasPushState?e:"#"+e},N.convertRouteToModuleId=function(e){return c(e)},N.convertRouteToTitle=function(e){var t=c(e);return t.substring(0,1).toUpperCase()+t.substring(1)},N.map=function(t,n){if(e.isArray(t)){for(var i=0;i<t.length;i++)N.map(t[i]);return N}return e.isString(t)||e.isRegExp(t)?(n?e.isString(n)&&(n={moduleId:n}):n={},n.route=t):n=t,O(n)},N.buildNavigationModel=function(t){for(var n=[],i=N.routes,a=t||100,o=0;o<i.length;o++){var r=i[o];r.nav&&(e.isNumber(r.nav)||(r.nav=++a),n.push(r))}return n.sort(function(e,t){return e.nav-t.nav}),N.navigationModel(n),N},N.mapUnknownRoutes=function(t,n){var i="*catchall",a=l(i);return N.route(a,function(r,s){var l=C(a,r,s),c={fragment:r,queryString:s,config:{route:i,routePattern:a},params:l.params,queryParams:l.queryParams};if(t)if(e.isString(t))c.config.moduleId=t,n&&o.navigate(n,{trigger:!1,replace:!0});else if(e.isFunction(t)){var u=t(c);if(u&&u.then)return u.then(function(){N.trigger("router:route:before-config",c.config,N),N.trigger("router:route:after-config",c.config,N),M(c)}),void 0}else c.config=t,c.config.route=i,c.config.routePattern=a;else c.config.moduleId=r;N.trigger("router:route:before-config",c.config,N),N.trigger("router:route:after-config",c.config,N),M(c)}),N},N.reset=function(){return _=E=void 0,N.handlers=[],N.routes=[],N.off(),delete N.options,N},N.makeRelative=function(t){return e.isString(t)&&(t={moduleId:t,route:t}),t.moduleId&&!u(t.moduleId,"/")&&(t.moduleId+="/"),t.route&&!u(t.route,"/")&&(t.route+="/"),t.fromParent&&(N.relativeToParentRouter=!0),N.on("router:route:before-config").then(function(e){t.moduleId&&(e.moduleId=t.moduleId+e.moduleId),t.route&&(e.route=""===e.route?t.route.substring(0,t.route.length-1):t.route+e.route)}),t.dynamicHash&&(N.on("router:route:after-config").then(function(e){e.routePattern=l(e.route?t.dynamicHash+"/"+e.route:t.dynamicHash),e.dynamicHash=e.dynamicHash||r.observable(e.hash)}),N.on("router:route:before-child-routes").then(function(e,t){for(var n=e.router,i=0;i<n.routes.length;i++){var a=n.routes[i],o=t.params.slice(0);a.hash=n.convertRouteToHash(a.route).replace(p,function(e){return o.length>0?o.shift():e}),a.dynamicHash(a.hash)}})),N},N.createChildRouter=function(){var e=x();return e.parent=N,e},N};return h=x(),h.explicitNavigation=!1,h.navigatingBack=!1,h.makeRoutesCaseSensitive=function(){w=!0},h.targetIsThisWindow=function(e){var t=s(e.target).attr("target");return!t||t===window.name||"_self"===t||"top"===t&&window===window.top?!0:!1},h.activate=function(t){return e.defer(function(n){if(v=n,h.options=e.extend({routeHandler:h.loadUrl},h.options,t),o.activate(h.options),o._hasPushState)for(var i=h.routes,a=i.length;a--;){var r=i[a];r.hash=r.hash.replace("#","/")}var l=h.options.root&&new RegExp("^"+h.options.root+"/");s(document).delegate("a","click",function(e){if(o._hasPushState){if(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&h.targetIsThisWindow(e)){var t=s(this).attr("href");null==t||"#"===t.charAt(0)||/^[a-z]+:/i.test(t)||(h.explicitNavigation=!0,e.preventDefault(),l&&(t=t.replace(l,"")),o.navigate(t))}}else h.explicitNavigation=!0}),o.options.silent&&v&&(v.resolve(),v=null)}).promise()},h.deactivate=function(){o.deactivate()},h.install=function(){r.bindingHandlers.router={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,i,o){var s=r.utils.unwrapObservable(t())||{};if(s.__router__)s={model:s.activeItem(),attached:s.attached,compositionComplete:s.compositionComplete,activate:!1};else{var l=r.utils.unwrapObservable(s.router||i.router)||h;s.model=l.activeItem(),s.attached=l.attached,s.compositionComplete=l.compositionComplete,s.activate=!1}a.compose(e,s,o)}},r.virtualElements.allowedBindings.router=!0},h});
define('plugins/serializer',["durandal/system"],function(e){return{typeAttribute:"type",space:void 0,replacer:function(e,t){if(e){var n=e[0];if("_"===n||"$"===n)return void 0}return t},serialize:function(t,n){return n=void 0===n?{}:n,(e.isString(n)||e.isNumber(n))&&(n={space:n}),JSON.stringify(t,n.replacer||this.replacer,n.space||this.space)},getTypeId:function(e){return e?e[this.typeAttribute]:void 0},typeMap:{},registerType:function(){var t=arguments[0];if(1==arguments.length){var n=t[this.typeAttribute]||e.getModuleId(t);this.typeMap[n]=t}else this.typeMap[t]=arguments[1]},reviver:function(e,t,n,i){var a=n(t);if(a){var r=i(a);if(r)return r.fromJSON?r.fromJSON(t):new r(t)}return t},deserialize:function(e,t){var n=this;t=t||{};var i=t.getTypeId||function(e){return n.getTypeId(e)},a=t.getConstructor||function(e){return n.typeMap[e]},r=t.reviver||function(e,t){return n.reviver(e,t,i,a)};return JSON.parse(e,r)},clone:function(e,t){return this.deserialize(this.serialize(e,t),t)}}});
define('plugins/widget',["durandal/system","durandal/composition","jquery","knockout"],function(e,t,n,i){function a(e,n){var a=i.utils.domData.get(e,l);a||(a={parts:t.cloneNodes(i.virtualElements.childNodes(e))},i.virtualElements.emptyNode(e),i.utils.domData.set(e,l,a)),n.parts=a.parts}var r={},o={},s=["model","view","kind"],l="durandal-widget-data",c={getSettings:function(t){var n=i.utils.unwrapObservable(t())||{};if(e.isString(n))return{kind:n};for(var a in n)n[a]=-1!=i.utils.arrayIndexOf(s,a)?i.utils.unwrapObservable(n[a]):n[a];return n},registerKind:function(e){i.bindingHandlers[e]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,n,i,r,o){var s=c.getSettings(n);s.kind=e,a(t,s),c.create(t,s,o,!0)}},i.virtualElements.allowedBindings[e]=!0,t.composeBindings.push(e+":")},mapKind:function(e,t,n){t&&(o[e]=t),n&&(r[e]=n)},mapKindToModuleId:function(e){return r[e]||c.convertKindToModulePath(e)},convertKindToModulePath:function(e){return"widgets/"+e+"/viewmodel"},mapKindToViewId:function(e){return o[e]||c.convertKindToViewPath(e)},convertKindToViewPath:function(e){return"widgets/"+e+"/view"},createCompositionSettings:function(e,t){return t.model||(t.model=this.mapKindToModuleId(t.kind)),t.view||(t.view=this.mapKindToViewId(t.kind)),t.preserveContext=!0,t.activate=!0,t.activationData=t,t.mode="templated",t},create:function(e,n,i,a){a||(n=c.getSettings(function(){return n},e));var r=c.createCompositionSettings(e,n);t.compose(e,r,i)},install:function(e){if(e.bindingName=e.bindingName||"widget",e.kinds)for(var n=e.kinds,r=0;r<n.length;r++)c.registerKind(n[r]);i.bindingHandlers[e.bindingName]={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,i,r){var o=c.getSettings(t);a(e,o),c.create(e,o,r,!0)}},t.composeBindings.push(e.bindingName+":"),i.virtualElements.allowedBindings[e.bindingName]=!0}};return c});
define('transitions/entrance',["durandal/system","durandal/composition","jquery"],function(e,t,n){function i(e,t){e.classList.remove(t?"entrance-in-fade":"entrance-in"),e.classList.remove("entrance-out")}var a=100,o={left:"0px",opacity:1},r={left:"",top:"",right:"",bottom:"",position:"",opacity:""},s=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/MSIE/),l=!1,c="Webkit Moz O ms Khtml".split(" "),u=document.createElement("div");if(void 0!==u.style.animationName&&(l=!0),!l)for(var d=0;d<c.length;d++)if(void 0!==u.style[c[d]+"AnimationName"]){l=!0;break}l?s?e.log("Using CSS3/jQuery mixed animations."):e.log("Using CSS3 animations."):e.log("Using jQuery animations.");var f=function(t){return e.defer(function(e){function c(){e.resolve()}function u(){t.keepScrollPosition||n(document).scrollTop(0)}function d(){u(),t.triggerAttach(),l?(i(t.child,g),t.child.classList.add(g?"entrance-in-fade":"entrance-in"),setTimeout(function(){i(t.child,g),t.activeView&&i(t.activeView,g),v.css(r),c()},f)):v.animate(o,{duration:f,easing:"swing",always:function(){v.css(r),c()}})}if(t.child){var f=t.duration||500,v=n(t.child),g=!!t.fadeOnly,h={display:"block",opacity:0,position:"absolute",left:g||l?"0px":"20px",right:0,top:0,bottom:0};v.css(h),t.activeView?l&&!s?(i(t.activeView,g),t.activeView.classList.add("entrance-out"),setTimeout(d,a)):n(t.activeView).fadeOut({duration:a,always:d}):d()}else n(t.activeView).fadeOut(a,c)}).promise()};return f});

require(["main"]);
}());